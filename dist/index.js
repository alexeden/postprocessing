!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("three")):"function"==typeof define&&define.amd?define(["three"],t):"object"==typeof exports?exports.postprocessing=t(require("three")):e.postprocessing=t(e.three)}(window,function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=9)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i.Scene,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new i.OrthographicCamera(-1,1,1,-1,0,1);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.scene=n,this.camera=r,this.uniform=null,this.quad=null,this.needsSwap=!0,this.needsDepthTexture=!1,this.renderToScreen=!1,this.enabled=!0}var t,n,c;return t=e,(n=[{key:"getFullscreenMaterial",value:function(){return null!==this.quad?this.quad.material:null}},{key:"getFullscreenMaterials",value:function(){return null===this.quad?[]:Array.isArray(this.quad.material)?this.quad.material:[this.quad.material]}},{key:"setFullscreenMaterial",value:function(e){if(null!==this.quad)this.quad.material=e;else{var t=new i.Mesh(new i.PlaneBufferGeometry(2,2),e);t.frustumCulled=!1,null!==this.scene&&(this.scene.add(t),this.quad=t)}}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t){}},{key:"dispose",value:function(){var e=this;this.getFullscreenMaterials().forEach(function(e){return e.dispose()}),Object.keys(this).map(function(t){return e[t]}).filter(function(e){return null!==e&&"object"===r(e)&&"function"==typeof e.dispose}).forEach(function(e){return e.dispose()})}}])&&o(t.prototype,n),c&&o(t,c),e}();t.Pass=c},function(t,n){t.exports=e},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(13))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(12);t.ClearMaskPass=r.ClearMaskPass;var o=n(4);t.ClearPass=o.ClearPass;var i=n(14);t.MaskPass=i.MaskPass;var c=n(0);t.Pass=c.Pass;var u=n(15);t.RenderPass=u.RenderPass;var a=n(16);t.ShaderPass=a.ShaderPass},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(1),l=n(0),f=n(2),y=function(e){function t(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=c(this,u(t).call(this,f.PassName.Clear));var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({clearAlpha:0,clearColor:null},n);return e.needsSwap=!1,e.clearColor=r.clearColor,e.clearAlpha=r.clearAlpha,e}var n,r,s;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,l.Pass),n=t,(r=[{key:"render",value:function(e,n){var r,o=this.clearColor;null!==o&&(t.color.copy(e.getClearColor()),r=e.getClearAlpha(),e.setClearColor(o,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?void 0:n),e.clear(),null!==o&&e.setClearColor(t.color,r)}}])&&i(n.prototype,r),s&&i(n,s),t}();y.color=new s.Color,t.ClearPass=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(17);t.CopyMaterial=r.CopyMaterial},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(7);t.BlendFunction=r.BlendFunction;var o=n(21);t.BlendMode=o.BlendMode},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.SKIP=0]="SKIP",e[e.ADD=1]="ADD",e[e.ALPHA=2]="ALPHA",e[e.AVERAGE=3]="AVERAGE",e[e.COLOR_BURN=4]="COLOR_BURN",e[e.COLOR_DODGE=5]="COLOR_DODGE",e[e.DARKEN=6]="DARKEN",e[e.DIFFERENCE=7]="DIFFERENCE",e[e.EXCLUSION=8]="EXCLUSION",e[e.LIGHTEN=9]="LIGHTEN",e[e.MULTIPLY=10]="MULTIPLY",e[e.DIVIDE=11]="DIVIDE",e[e.NEGATION=12]="NEGATION",e[e.NORMAL=13]="NORMAL",e[e.OVERLAY=14]="OVERLAY",e[e.REFLECT=15]="REFLECT",e[e.SCREEN=16]="SCREEN",e[e.SOFT_LIGHT=17]="SOFT_LIGHT",e[e.SUBTRACT=18]="SUBTRACT"}(t.BlendFunction||(t.BlendFunction={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(40))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(10)),r(n(20)),r(n(5)),r(n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11);t.EffectComposer=r.EffectComposer},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=n(3),u=n(5),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=t,this.inputBuffer=null,this.outputBuffer=null,this.copyPass=new c.ShaderPass(new u.CopyMaterial),this.passes=[];var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({depthBuffer:!0,stencilBuffer:!1},n);null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(o.depthBuffer,o.stencilBuffer),this.outputBuffer=this.inputBuffer.clone())}var t,n,a;return t=e,(n=[{key:"replaceRenderer",value:function(e){var t,n,r,o=this.renderer;return null!==o&&o!==e&&(this.renderer=e,this.renderer.autoClear=!1,t=o.domElement.parentNode,n=o.getSize(),r=e.getSize(),null!==t&&(t.removeChild(o.domElement),t.appendChild(e.domElement)),n.width===r.width&&n.height===r.height||this.setSize()),o}},{key:"getDepthTexture",value:function(e){var t,n,r=this.passes,o=null,i=!0;for(t=0;t<e;++t)(n=r[t]).needsSwap?i=!i:n instanceof c.RenderPass&&(o=(i?this.inputBuffer:this.outputBuffer).depthTexture);return o}},{key:"createDepthTexture",value:function(e,t){var n=new i.DepthTexture(e,t);this.inputBuffer.stencilBuffer&&(n.format=i.DepthStencilFormat,n.type=i.UnsignedInt248Type),this.inputBuffer.depthTexture=n,this.outputBuffer.depthTexture=n.clone()}},{key:"createBuffer",value:function(e,t){var n=this.renderer.getDrawingBufferSize(),r=this.renderer.context.getContextAttributes().alpha,o=new i.WebGLRenderTarget(n.width,n.height,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:r?i.RGBAFormat:i.RGBFormat,depthBuffer:e,stencilBuffer:t});return o.texture.name="EffectComposer.Buffer",o.texture.generateMipmaps=!1,o}},{key:"addPass",value:function(e,t){var n=this.renderer.getDrawingBufferSize();e.setSize(n.width,n.height),e.initialize(this.renderer,this.renderer.context.getContextAttributes().alpha),void 0!==t?this.passes.splice(t,0,e):t=this.passes.push(e)-1,e.needsDepthTexture&&(null===this.inputBuffer.depthTexture&&this.createDepthTexture(n.width,n.height),e.setDepthTexture(this.getDepthTexture(t)))}},{key:"removePass",value:function(e){this.passes.splice(this.passes.indexOf(e),1)}},{key:"render",value:function(e){var t,n,r,o=this.inputBuffer,i=this.outputBuffer,u=!1,a=!0,s=!1,l=void 0;try{for(var f,y=this.passes[Symbol.iterator]();!(a=(f=y.next()).done);a=!0){var p=f.value;p.enabled&&(p.render(this.renderer,o,i,e,u),p.needsSwap&&(u&&(this.copyPass.renderToScreen=p.renderToScreen,t=this.renderer.context,(n=this.renderer.state).buffers.stencil.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,o,i),n.buffers.stencil.setFunc(t.EQUAL,1,4294967295)),r=o,o=i,i=r),p instanceof c.MaskPass?u=!0:p instanceof c.ClearMaskPass&&(u=!1))}}catch(e){s=!0,l=e}finally{try{a||null==y.return||y.return()}finally{if(s)throw l}}}},{key:"setSize",value:function(e,t){var n;void 0!==e&&void 0!==t||(e=(n=this.renderer.getSize()).width,t=n.height),this.renderer.setSize(e,t);var r=this.renderer.getDrawingBufferSize();this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);var o=!0,i=!1,c=void 0;try{for(var u,a=this.passes[Symbol.iterator]();!(o=(u=a.next()).done);o=!0){u.value.setSize(r.width,r.height)}}catch(e){i=!0,c=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw c}}}},{key:"reset",value:function(){var e=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer);this.dispose(),this.inputBuffer=e,this.outputBuffer=e.clone(),this.copyPass=new c.ShaderPass(new u.CopyMaterial)}},{key:"dispose",value:function(){var e=!0,t=!1,n=void 0;try{for(var r,o=this.passes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}this.passes=[],null!==this.inputBuffer&&(this.inputBuffer.dispose(),this.inputBuffer=null),null!==this.outputBuffer&&(this.outputBuffer.dispose(),this.outputBuffer=null),this.copyPass.dispose()}}])&&o(t.prototype,n),a&&o(t,a),e}();t.EffectComposer=a},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(0),l=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=i(this,c(t).call(this,a.PassName.ClearMask))).needsSwap=!1,e}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s.Pass),n=t,(r=[{key:"render",value:function(e){e.state.buffers.stencil.setTest(!1)}}])&&o(n.prototype,r),l&&o(n,l),t}();t.ClearMaskPass=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Clear="clear",e.Render="render",e.Shader="shader",e.Mask="mask",e.ClearMask="clearMask"}(t.PassName||(t.PassName={}))},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(0),l=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=i(this,c(t).call(this,a.PassName.Mask,e,n))).inverse=!1,r.clearStencil=!0,r.needsSwap=!1,r}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s.Pass),n=t,(r=[{key:"render",value:function(e,t,n){var r=e.context,o=e.state,i=this.scene,c=this.camera,u=this.inverse?0:1,a=1-u;o.buffers.color.setMask(0),o.buffers.depth.setMask(0),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,u,4294967295),o.buffers.stencil.setClear(a),this.clearStencil&&(this.renderToScreen?(e.setRenderTarget(),e.clearStencil()):(e.setRenderTarget(t),e.clearStencil(),e.setRenderTarget(n),e.clearStencil())),this.renderToScreen?e.render(i,c):(e.render(i,c,t),e.render(i,c,n)),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP)}}])&&o(n.prototype,r),l&&o(n,l),t}();t.MaskPass=l},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),l=n(0),f=n(2),y=function(e){function t(e,n){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=c(this,u(t).call(this,f.PassName.Render,e,n))).scene=e,r.camera=n,r.overrideMaterial=null;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),r.forEach(function(t){o(e,t,n[t])})}return e}({overrideMaterial:null,clearAlpha:1,clearDepth:!1,clear:!0},i);return r.needsSwap=!1,r.clearPass=new s.ClearPass(a),r.overrideMaterial=a.overrideMaterial,r.clearDepth=a.clearDepth,r.clear=a.clear,r}var n,r,y;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&a(e,t)}(t,l.Pass),n=t,(r=[{key:"render",value:function(e,t){var n=this.scene,r=this.renderToScreen?void 0:t,o=n.overrideMaterial;this.clear?(this.clearPass.renderToScreen=this.renderToScreen,this.clearPass.render(e,t)):this.clearDepth&&(e.setRenderTarget(r),e.clearDepth()),n.overrideMaterial=this.overrideMaterial,e.render(n,this.camera,r),n.overrideMaterial=o}}])&&i(n.prototype,r),y&&i(n,y),t}();t.RenderPass=y},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function i(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),s=n(0),l=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=i(this,c(t).call(this,a.PassName.Shader))).setFullscreenMaterial(e),n.uniform=null,n.setInput(r),n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,s.Pass),n=t,(r=[{key:"setInput",value:function(e){var t=this,n=this.getFullscreenMaterials();this.uniform=null,n.forEach(function(n){var r=n.uniforms;void 0!==r[e]&&(t.uniform=r[e])})}},{key:"render",value:function(e,t,n){null!==this.uniform&&(this.uniform.value=t.texture),e.render(this.scene,this.camera,this.renderToScreen?void 0:n)}}])&&o(n.prototype,r),l&&o(n,l),t}();t.ShaderPass=l},function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e,t){return!t||"object"!==r(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var u=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(1),s=u(n(18)),l=u(n(19)),f=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o(this,i(t).call(this,{uniforms:{inputBuffer:new a.Uniform(null),opacity:new a.Uniform(1)},fragmentShader:s.default,vertexShader:l.default,depthWrite:!1,depthTest:!1}))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(t,a.ShaderMaterial),t}();t.CopyMaterial=f},function(e,t){e.exports="uniform sampler2D inputBuffer;\nuniform float opacity;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texel = texture2D(inputBuffer, vUv);\n\tgl_FragColor = opacity * texel;\n\n}\n"},function(e,t){e.exports="varying vec2 vUv;\n\nvoid main() {\n\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n}\n"},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n(6)),r(n(8));var o=n(41);t.Effect=o.Effect},function(e,t,n){"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),c=n(7),u=o(n(22)),a=o(n(23)),s=o(n(24)),l=o(n(25)),f=o(n(26)),y=o(n(27)),p=o(n(28)),d=o(n(29)),b=o(n(30)),v=o(n(31)),h=o(n(32)),x=o(n(33)),m=o(n(34)),O=o(n(35)),g=o(n(36)),P=o(n(37)),S=o(n(38)),w=o(n(39)),E=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.blendFunction=t,this.opacity=new i.Uniform(n)}var t,n,o;return t=e,(n=[{key:"getShaderCode",value:function(){switch(this.blendFunction){case c.BlendFunction.SKIP:return null;case c.BlendFunction.ADD:return u.default;case c.BlendFunction.ALPHA:return a.default;case c.BlendFunction.AVERAGE:return s.default;case c.BlendFunction.COLOR_BURN:return l.default;case c.BlendFunction.COLOR_DODGE:return f.default;case c.BlendFunction.DARKEN:return y.default;case c.BlendFunction.DIFFERENCE:return p.default;case c.BlendFunction.EXCLUSION:return d.default;case c.BlendFunction.LIGHTEN:return b.default;case c.BlendFunction.MULTIPLY:return v.default;case c.BlendFunction.DIVIDE:return h.default;case c.BlendFunction.NEGATION:return x.default;case c.BlendFunction.NORMAL:return m.default;case c.BlendFunction.OVERLAY:return O.default;case c.BlendFunction.REFLECT:return g.default;case c.BlendFunction.SCREEN:return P.default;case c.BlendFunction.SOFT_LIGHT:return S.default;case c.BlendFunction.SUBTRACT:return w.default}}}])&&r(t.prototype,n),o&&r(t,o),e}();t.BlendMode=E},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn min(x + y, 1.0) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, y.a), x.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (x + y) * 0.5 * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn min(x, y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn abs(x - y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (x + y - 2.0 * x * y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn max(x, y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn x * y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y > 0.0) ? min(x / y, 1.0) : 1.0;\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (1.0 - abs(1.0 - x - y)) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (1.0 - (1.0 - x) * (1.0 - y)) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y < 0.5) ?\n\t\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\n\t\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn max(x + y - 1.0, 0.0) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.Glitch="GlitchEffect"}(t.EffectName||(t.EffectName={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH=1]="DEPTH",e[e.CONVOLUTION=2]="CONVOLUTION"}(t.EffectAttribute||(t.EffectAttribute={})),function(e){e.DERIVATIVES="derivatives",e.FRAG_DEPTH="fragDepth",e.DRAW_BUFFERS="drawBuffers",e.SHADER_TEXTURE_LOD="shaderTextureLOD"}(t.WebGLExtension||(t.WebGLExtension={}))},function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(6),c=n(8),u=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.fragmentShader=n,this.vertexShader=null;var u=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){r(e,t,n[t])})}return e}({attributes:c.EffectAttribute.NONE,blendFunction:i.BlendFunction.SCREEN,defines:new Map,uniforms:new Map,extensions:new Set,vertexShader:null},o);this.attributes=u.attributes,this.vertexShader=u.vertexShader,this.defines=u.defines,this.uniforms=u.uniforms,this.extensions=u.extensions,this.blendMode=new i.BlendMode(u.blendFunction)}var t,n,u;return t=e,(n=[{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"update",value:function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"setSize",value:function(e,t){}},{key:"initialize",value:function(e,t){}},{key:"dispose",value:function(){for(var e=Object.keys(this),t=0;t<e.length;t++){var n=e[t];null!==this[n]&&"function"==typeof this[n].dispose&&(this[n].dispose(),this[n]=null)}}}])&&o(t.prototype,n),u&&o(t,u),e}();t.Effect=u}])});
//# sourceMappingURL=index.js.map