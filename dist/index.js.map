{"version":3,"sources":["webpack://postprocessing/webpack/universalModuleDefinition","webpack://postprocessing/webpack/bootstrap","webpack://postprocessing/external \"three\"","webpack://postprocessing/./passes/Pass.ts","webpack://postprocessing/./passes/lib/index.ts","webpack://postprocessing/./materials/index.ts","webpack://postprocessing/./effects/index.ts","webpack://postprocessing/./effects/blending/BlendFunction.ts","webpack://postprocessing/./effects/lib/index.ts","webpack://postprocessing/./passes/index.ts","webpack://postprocessing/./passes/ClearPass.ts","webpack://postprocessing/./effects/blending/index.ts","webpack://postprocessing/./effects/Effect.ts","webpack://postprocessing/./materials/lib/index.ts","webpack://postprocessing/./passes/utils/FindSubstringsUtil.ts","webpack://postprocessing/./passes/utils/PrefixSubstringsUtils.ts","webpack://postprocessing/./index.ts","webpack://postprocessing/./core/index.ts","webpack://postprocessing/./core/EffectComposer.ts","webpack://postprocessing/./passes/ClearMaskPass.ts","webpack://postprocessing/./passes/lib/PassName.ts","webpack://postprocessing/./passes/EffectPass.ts","webpack://postprocessing/./effects/blending/BlendMode.ts","webpack://postprocessing/./effects/blending/glsl/add/shader.frag","webpack://postprocessing/./effects/blending/glsl/alpha/shader.frag","webpack://postprocessing/./effects/blending/glsl/average/shader.frag","webpack://postprocessing/./effects/blending/glsl/color-burn/shader.frag","webpack://postprocessing/./effects/blending/glsl/color-dodge/shader.frag","webpack://postprocessing/./effects/blending/glsl/darken/shader.frag","webpack://postprocessing/./effects/blending/glsl/difference/shader.frag","webpack://postprocessing/./effects/blending/glsl/exclusion/shader.frag","webpack://postprocessing/./effects/blending/glsl/lighten/shader.frag","webpack://postprocessing/./effects/blending/glsl/multiply/shader.frag","webpack://postprocessing/./effects/blending/glsl/divide/shader.frag","webpack://postprocessing/./effects/blending/glsl/negation/shader.frag","webpack://postprocessing/./effects/blending/glsl/normal/shader.frag","webpack://postprocessing/./effects/blending/glsl/overlay/shader.frag","webpack://postprocessing/./effects/blending/glsl/reflect/shader.frag","webpack://postprocessing/./effects/blending/glsl/screen/shader.frag","webpack://postprocessing/./effects/blending/glsl/soft-light/shader.frag","webpack://postprocessing/./effects/blending/glsl/subtract/shader.frag","webpack://postprocessing/./effects/lib/effects.types.ts","webpack://postprocessing/./effects/ChromaticAberrationEffect.ts","webpack://postprocessing/./effects/glsl/chromatic-aberration/shader.frag","webpack://postprocessing/./effects/glsl/chromatic-aberration/shader.vert","webpack://postprocessing/./materials/lib/Section.ts","webpack://postprocessing/./materials/CopyMaterial.ts","webpack://postprocessing/./materials/glsl/copy/shader.frag","webpack://postprocessing/./materials/glsl/common/shader.vert","webpack://postprocessing/./materials/EffectMaterial.ts","webpack://postprocessing/./materials/glsl/effect/shader.frag","webpack://postprocessing/./materials/glsl/effect/shader.vert","webpack://postprocessing/./passes/utils/index.ts","webpack://postprocessing/./passes/utils/IntegrateEffectUtil.ts","webpack://postprocessing/./passes/MaskPass.ts","webpack://postprocessing/./passes/RenderPass.ts","webpack://postprocessing/./passes/ShaderPass.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","three_1","Pass","scene","arguments","length","undefined","Scene","camera","OrthographicCamera","_classCallCheck","this","uniform","quad","needsSwap","needsDepthTexture","renderToScreen","enabled","material","Array","isArray","type","getFullscreenMaterials","filter","mat","Mesh","PlaneBufferGeometry","frustumCulled","add","depthTexture","width","height","renderer","alpha","_this","forEach","dispose","keys","map","prop","_typeof","PassName_1","PassName","__export","CopyMaterial_1","CopyMaterial","EffectMaterial_1","EffectMaterial","ChromaticAberrationEffect_1","ChromaticAberrationEffect","Effect_1","Effect","BlendFunction","ClearMaskPass_1","ClearMaskPass","ClearPass_1","ClearPass","EffectPass_1","EffectPass","MaskPass_1","MaskPass","Pass_1","RenderPass_1","RenderPass","ShaderPass_1","ShaderPass","lib_1","partialOptions","_possibleConstructorReturn","_getPrototypeOf","Clear","options","_objectSpread","clearAlpha","clearColor","inputBuffer","color","copy","getClearColor","getClearAlpha","setClearColor","setRenderTarget","clear","Color","BlendFunction_1","BlendMode_1","BlendMode","blending_1","fragmentShader","vertexShader","settings","attributes","EffectAttribute","NONE","blendFunction","SCREEN","defines","Map","uniforms","extensions","Set","blendMode","_arr","_i","Section_1","Section","findSubstrings","regExp","str","result","substrings","exec","push","prefixSubstrings","prefix","strings","prefixed","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","next","done","substring","charAt","toUpperCase","slice","RegExp","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","entries","entry","set","replace","err","return","EffectComposer_1","EffectComposer","passes_1","materials_1","outputBuffer","copyPass","passes","depthBuffer","stencilBuffer","autoClear","createBuffer","clone","parent","oldSize","newSize","oldRenderer","domElement","parentNode","getSize","removeChild","appendChild","setSize","index","pass","DepthTexture","format","DepthStencilFormat","UnsignedInt248Type","drawingBufferSize","getDrawingBufferSize","context","getContextAttributes","renderTarget","WebGLRenderTarget","minFilter","LinearFilter","magFilter","RGBAFormat","RGBFormat","texture","generateMipmaps","initialize","splice","createDepthTexture","setDepthTexture","getDepthTexture","indexOf","delta","state","buffer","stencilTest","render","buffers","stencil","setFunc","NOTEQUAL","EQUAL","size","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","ClearMask","setTest","effects_1","utils_1","mainCamera","skipRendering","quantize","varyings","minTime","maxTime","_len","effects","_key","sort","a","b","setFullscreenMaterial","createMaterial","blendRegExp","shaderParts","FRAGMENT_HEAD","FRAGMENT_MAIN_UV","FRAGMENT_MAIN_IMAGE","VERTEX_HEAD","VERTEX_MAIN_SUPPORT","blendModes","id","transformedUv","readDepth","effect","SKIP","CONVOLUTION","console","error","integrateEffect","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","extension","values","concat","getShaderCode","DEPTH","trim","dithering","_this2","depthPacking","resolution","x","y","newMaterial","materials","getFullscreenMaterialsOfType","needsUpdate","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_this3","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","update","time","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","capabilities","max","Math","min","maxFragmentUniforms","maxVertexUniforms","warn","maxVaryings","_iteratorNormalCompletion8","_didIteratorError8","_iteratorError8","_step8","_iterator8","_get","_iteratorNormalCompletion9","_didIteratorError9","_iteratorError9","_step9","_iterator9","__importDefault","mod","default","shader_frag_1","shader_frag_2","shader_frag_3","shader_frag_4","shader_frag_5","shader_frag_6","shader_frag_7","shader_frag_8","shader_frag_9","shader_frag_10","shader_frag_11","shader_frag_12","shader_frag_13","shader_frag_14","shader_frag_15","shader_frag_16","shader_frag_17","shader_frag_18","opacity","Uniform","ADD","ALPHA","AVERAGE","COLOR_BURN","COLOR_DODGE","DARKEN","DIFFERENCE","EXCLUSION","LIGHTEN","MULTIPLY","DIVIDE","NEGATION","NORMAL","OVERLAY","REFLECT","SOFT_LIGHT","SUBTRACT","EffectName","WebGLExtension","shader_vert_1","offset","Vector2","ChromaticAberration","depthWrite","depthTest","ShaderMaterial","DEPTH_PACKING","texelSize","cameraNear","cameraFar","aspect","adoptCameraSettings","PerspectiveCamera","near","far","PERSPECTIVE_CAMERA","Number","parseInt","toFixed","FindSubstringsUtil_1","IntegrateEffectUtil_1","PrefixSubstringsUtils_1","functionRegExp","shaders","mainImageExists","includes","mainUvExists","names","from","blendOpacity","Mask","inverse","clearStencil","writeValue","clearValue","setMask","depth","setLocked","setOp","REPLACE","ALWAYS","setClear","KEEP","Render","overrideMaterial","clearDepth","clearPass","input","Shader","setInput"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"three\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"three\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"postprocessing\"] = factory(require(\"three\"));\n\telse\n\t\troot[\"postprocessing\"] = factory(root[\"three\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 14);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\n/**\n * An abstract pass.\n *\n * Passes that do not rely on the depth buffer should explicitly disable the\n * depth test and depth write in their respective shader materials.\n */\nclass Pass {\n    /**\n     * Constructs a new pass.\n     *\n     * @param - The name of this pass. Does not have to be unique.\n     * @param - The scene to render. The default scene contains a single mesh that fills the screen.\n     * @param - The camera. The default camera perfectly captures the screen mesh.\n     */\n    constructor(name, scene = new three_1.Scene(), camera = new three_1.OrthographicCamera(-1, 1, 1, -1, 0, 1)) {\n        this.name = name;\n        this.scene = scene;\n        this.camera = camera;\n        // [k: string]: any;\n        this.uniform = null;\n        /**\n         * A quad mesh that fills the screen.\n         */\n        this.quad = null;\n        /**\n         * Indicates whether the {@link EffectComposer} should swap the frame\n         * buffers after this pass has finished rendering.\n         *\n         * Set this to `false` if this pass doesn't render to the output buffer or\n         * the screen. Otherwise, the contents of the input buffer will be lost.\n         */\n        this.needsSwap = true;\n        /**\n         * Indicates whether the {@link EffectComposer} should prepare a depth\n         * texture for this pass.\n         *\n         * Set this to `true` if this pass relies on depth information from a\n         * preceding {@link RenderPass}.\n         */\n        this.needsDepthTexture = false;\n        /**\n         * Indicates whether this pass should render to screen.\n         */\n        this.renderToScreen = false;\n        /**\n         * Indicates whether this pass should be executed.\n         */\n        this.enabled = true;\n    }\n    /**\n     * Returns the current fullscreen material.\n     *\n     * @return The current fullscreen material(s), or null if there is none.\n     */\n    getFullscreenMaterial() {\n        return (this.quad !== null) ? this.quad.material : null;\n    }\n    /**\n     * Returns the current fullscreen material.\n     *\n     * @return The current fullscreen materials.\n     */\n    getFullscreenMaterials() {\n        return this.quad === null\n            ? []\n            : Array.isArray(this.quad.material)\n                ? this.quad.material\n                : [this.quad.material];\n    }\n    /**\n     * Returns the current fullscreen material.\n     *\n     * @return The current fullscreen materials.\n     */\n    getFullscreenMaterialsOfType(type) {\n        return this.getFullscreenMaterials()\n            .filter((mat) => mat instanceof type);\n    }\n    /**\n     * Sets the fullscreen material.\n     *\n     * The material will be assigned to the quad mesh that fills the screen. The\n     * screen quad will be created once a material is assigned via this method.\n     *\n     * @param - A fullscreen material.\n     */\n    setFullscreenMaterial(material) {\n        if (this.quad !== null) {\n            this.quad.material = material;\n        }\n        else {\n            const quad = new three_1.Mesh(new three_1.PlaneBufferGeometry(2, 2), material);\n            quad.frustumCulled = false;\n            if (this.scene !== null) {\n                this.scene.add(quad);\n                this.quad = quad;\n            }\n        }\n    }\n    /**\n     * Returns the current depth texture.\n     *\n     * @return The current depth texture, or null if there is none.\n     */\n    getDepthTexture() {\n        return null;\n    }\n    /**\n     * Sets the depth texture.\n     *\n     * You may override this method if your pass relies on the depth information\n     * of a preceding {@link RenderPass}.\n     *\n     * @param depthTexture - A depth texture.\n     * @param depthPacking - The depth packing. Default to `0`.\n     */\n    setDepthTexture(depthTexture, depthPacking = 0) { }\n    /**\n     * Updates this pass with the renderer's size.\n     *\n     * You may override this method in case you want to be informed about the main\n     * render size.\n     *\n     * The {@link EffectComposer} calls this method before this pass is\n     * initialized and every time its own size is updated.\n     *\n     * @param width - The renderer's width.\n     * @param height - The renderer's height.\n     * @example this.myRenderTarget.setSize(width, height);\n     */\n    setSize(width, height) { }\n    /**\n     * Performs initialization tasks.\n     *\n     * By overriding this method you gain access to the renderer. You'll also be\n     * able to configure your custom render targets to use the appropriate format\n     * (RGB or RGBA).\n     *\n     * The provided renderer can be used to warm up special off-screen render\n     * targets by performing a preliminary render operation.\n     *\n     * The {@link EffectComposer} calls this method when this pass is added to its\n     * queue, but not before its size has been set.\n     *\n     * @param renderer - The renderer.\n     * @param alpha - Whether the renderer uses the alpha channel or not.\n     * @example if(!alpha) { this.myRenderTarget.texture.format = RGBFormat; }\n     */\n    initialize(renderer, alpha) { }\n    /**\n     * Performs a shallow search for disposable properties and deletes them. The\n     * pass will be inoperative after this method was called!\n     *\n     * Disposable objects:\n     *  - WebGLRenderTarget\n     *  - Material\n     *  - Texture\n     *\n     * The {@link EffectComposer} calls this method when it is being destroyed.\n     * You may, however, use it independently to free memory when you are certain\n     * that you don't need this pass anymore.\n     */\n    dispose() {\n        this.getFullscreenMaterials().forEach(material => material.dispose());\n        /**\n         * @todo: Find a less sketchy (see: type safer) way of doing this\n         */\n        Object.keys(this)\n            .map(prop => this[prop])\n            .filter((value) => value !== null\n            && typeof value === 'object'\n            && typeof value.dispose === 'function')\n            .forEach(value => value.dispose());\n    }\n}\nexports.Pass = Pass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PassName_1 = require(\"./PassName\");\nexports.PassName = PassName_1.PassName;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib\"));\n// export { AdaptiveLuminanceMaterial } from './AdaptiveLuminanceMaterial';\n// export { ColorEdgesMaterial } from './ColorEdgesMaterial';\n// export { ConvolutionMaterial, KernelSize } from './ConvolutionMaterial';\nconst CopyMaterial_1 = require(\"./CopyMaterial\");\nexports.CopyMaterial = CopyMaterial_1.CopyMaterial;\n// export { DepthComparisonMaterial } from './DepthComparisonMaterial';\nconst EffectMaterial_1 = require(\"./EffectMaterial\");\nexports.EffectMaterial = EffectMaterial_1.EffectMaterial;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./blending\"));\n__export(require(\"./lib\"));\n// export { BloomEffect } from './BloomEffect';\n// export { BokehEffect } from './BokehEffect';\n// export { BrightnessContrastEffect } from './BrightnessContrastEffect';\n// export { ColorAverageEffect } from './ColorAverageEffect';\nvar ChromaticAberrationEffect_1 = require(\"./ChromaticAberrationEffect\");\nexports.ChromaticAberrationEffect = ChromaticAberrationEffect_1.ChromaticAberrationEffect;\n// export { DepthEffect } from './DepthEffect';\n// export { DotScreenEffect } from './DotScreenEffect';\nvar Effect_1 = require(\"./Effect\");\nexports.Effect = Effect_1.Effect;\n// export { GammaCorrectionEffect } from './GammaCorrectionEffect';\n// export { GlitchEffect, GlitchMode } from './GlitchEffect';\n// export { GodRaysEffect } from './GodRaysEffect';\n// export { GridEffect } from './GridEffect';\n// export { HueSaturationEffect } from './HueSaturationEffect';\n// export { NoiseEffect } from './NoiseEffect';\n// export { OutlineEffect } from './OutlineEffect';\n// export { PixelationEffect } from './PixelationEffect';\n// export { RealisticBokehEffect } from './RealisticBokehEffect';\n// export { ScanlineEffect } from './ScanlineEffect';\n// export { ShockWaveEffect } from './ShockWaveEffect';\n// export { SepiaEffect } from './SepiaEffect';\n// export { SMAAEffect } from './SMAAEffect';\n// export { SSAOEffect } from './SSAOEffect';\n// export { TextureEffect } from './TextureEffect';\n// export { ToneMappingEffect } from './ToneMappingEffect';\n// export { VignetteEffect } from './VignetteEffect';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A blend function enumeration.\n */\nvar BlendFunction;\n(function (BlendFunction) {\n    /** No blending. The effect will not be included in the final shader. */\n    BlendFunction[BlendFunction[\"SKIP\"] = 0] = \"SKIP\";\n    /** Additive blending. Fast, but may produce washed out results. */\n    BlendFunction[BlendFunction[\"ADD\"] = 1] = \"ADD\";\n    /** Alpha blending. Blends based on the alpha value of the new color. Opacity will be ignored. */\n    BlendFunction[BlendFunction[\"ALPHA\"] = 2] = \"ALPHA\";\n    /** Average blending. */\n    BlendFunction[BlendFunction[\"AVERAGE\"] = 3] = \"AVERAGE\";\n    /** Color dodge. */\n    BlendFunction[BlendFunction[\"COLOR_BURN\"] = 4] = \"COLOR_BURN\";\n    /** Color burn. */\n    BlendFunction[BlendFunction[\"COLOR_DODGE\"] = 5] = \"COLOR_DODGE\";\n    /** Prioritize darker colors. */\n    BlendFunction[BlendFunction[\"DARKEN\"] = 6] = \"DARKEN\";\n    /** Color difference. */\n    BlendFunction[BlendFunction[\"DIFFERENCE\"] = 7] = \"DIFFERENCE\";\n    /** Color exclusion. */\n    BlendFunction[BlendFunction[\"EXCLUSION\"] = 8] = \"EXCLUSION\";\n    /** Prioritize lighter colors. */\n    BlendFunction[BlendFunction[\"LIGHTEN\"] = 9] = \"LIGHTEN\";\n    /** Color multiplication. */\n    BlendFunction[BlendFunction[\"MULTIPLY\"] = 10] = \"MULTIPLY\";\n    /** Color division. */\n    BlendFunction[BlendFunction[\"DIVIDE\"] = 11] = \"DIVIDE\";\n    /** Color negation. */\n    BlendFunction[BlendFunction[\"NEGATION\"] = 12] = \"NEGATION\";\n    /** Normal blending. The new color overwrites the old one. */\n    BlendFunction[BlendFunction[\"NORMAL\"] = 13] = \"NORMAL\";\n    /** Color overlay. */\n    BlendFunction[BlendFunction[\"OVERLAY\"] = 14] = \"OVERLAY\";\n    /** Color reflection. */\n    BlendFunction[BlendFunction[\"REFLECT\"] = 15] = \"REFLECT\";\n    /** Screen blending. The two colors are effectively projected on a white screen simultaneously. */\n    BlendFunction[BlendFunction[\"SCREEN\"] = 16] = \"SCREEN\";\n    /** Soft light blending. */\n    BlendFunction[BlendFunction[\"SOFT_LIGHT\"] = 17] = \"SOFT_LIGHT\";\n    /** Color subtraction. */\n    BlendFunction[BlendFunction[\"SUBTRACT\"] = 18] = \"SUBTRACT\";\n})(BlendFunction = exports.BlendFunction || (exports.BlendFunction = {}));\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./effects.types\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// export { BlurPass } from './BlurPass';\nvar ClearMaskPass_1 = require(\"./ClearMaskPass\");\nexports.ClearMaskPass = ClearMaskPass_1.ClearMaskPass;\nvar ClearPass_1 = require(\"./ClearPass\");\nexports.ClearPass = ClearPass_1.ClearPass;\n// export { DepthPass } from './DepthPass';\nvar EffectPass_1 = require(\"./EffectPass\");\nexports.EffectPass = EffectPass_1.EffectPass;\nvar MaskPass_1 = require(\"./MaskPass\");\nexports.MaskPass = MaskPass_1.MaskPass;\n// export { NormalPass } from './NormalPass';\nvar Pass_1 = require(\"./Pass\");\nexports.Pass = Pass_1.Pass;\nvar RenderPass_1 = require(\"./RenderPass\");\nexports.RenderPass = RenderPass_1.RenderPass;\n// export { SavePass } from './SavePass';\nvar ShaderPass_1 = require(\"./ShaderPass\");\nexports.ShaderPass = ShaderPass_1.ShaderPass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst Pass_1 = require(\"./Pass\");\nconst lib_1 = require(\"./lib\");\n/**\n * A pass that clears the input buffer or the screen.\n *\n * You can prevent specific bits from being cleared by setting either the\n * `autoClearColor`, `autoClearStencil` or `autoClearDepth` properties of the renderer\n * to `false`.\n */\nclass ClearPass extends Pass_1.Pass {\n    constructor(partialOptions = {}) {\n        super(lib_1.PassName.Clear);\n        const options = {\n            clearAlpha: 0,\n            clearColor: null,\n            ...partialOptions,\n        };\n        this.needsSwap = false;\n        this.clearColor = options.clearColor;\n        this.clearAlpha = options.clearAlpha;\n    }\n    /**\n     * Clears the input buffer or the screen.\n     *\n     * @param renderer - The renderer.\n     * @param inputBuffer - A frame buffer that contains the result of the previous pass.\n     */\n    render(renderer, inputBuffer) {\n        const clearColor = this.clearColor;\n        let clearAlpha;\n        if (clearColor !== null) {\n            ClearPass.color.copy(renderer.getClearColor());\n            clearAlpha = renderer.getClearAlpha();\n            renderer.setClearColor(clearColor, this.clearAlpha);\n        }\n        renderer.setRenderTarget(this.renderToScreen ? undefined : inputBuffer);\n        renderer.clear();\n        if (clearColor !== null) {\n            renderer.setClearColor(ClearPass.color, clearAlpha);\n        }\n    }\n}\n/** Used for saving the original clear color of the renderer. */\nClearPass.color = new three_1.Color();\nexports.ClearPass = ClearPass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BlendFunction_1 = require(\"./BlendFunction\");\nexports.BlendFunction = BlendFunction_1.BlendFunction;\nvar BlendMode_1 = require(\"./BlendMode\");\nexports.BlendMode = BlendMode_1.BlendMode;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst blending_1 = require(\"./blending\");\nconst lib_1 = require(\"./lib\");\n/**\n * An abstract effect.\n * Effects can be combined using the {@link EffectPass}.\n */\nclass Effect {\n    constructor(name, fragmentShader, partialOptions = {}) {\n        this.name = name;\n        this.fragmentShader = fragmentShader;\n        this.vertexShader = null;\n        const settings = {\n            attributes: lib_1.EffectAttribute.NONE,\n            blendFunction: blending_1.BlendFunction.SCREEN,\n            defines: new Map(),\n            uniforms: new Map(),\n            extensions: new Set(),\n            vertexShader: null,\n            ...partialOptions,\n        };\n        this.attributes = settings.attributes;\n        this.vertexShader = settings.vertexShader;\n        this.defines = settings.defines;\n        this.uniforms = settings.uniforms;\n        this.extensions = settings.extensions;\n        this.blendMode = new blending_1.BlendMode(settings.blendFunction);\n    }\n    /**\n     * Sets the depth texture.\n     *\n     * You may override this method if your effect requires direct access to the\n     * depth texture that is bound to the associated {@link EffectPass}.\n     */\n    setDepthTexture(depthTexture, depthPacking = 0) { }\n    /**\n     * Updates the effect by performing supporting operations.\n     *\n     * This method is called by the {@link EffectPass} right before the main\n     * fullscreen render operation, even if the blend function is set to `SKIP`.\n     *\n     * You may override this method if you need to render additional off-screen\n     * textures or update custom uniforms.\n     *\n     * @param renderer - The renderer.\n     * @param inputBuffer - A frame buffer that contains the result of the previous pass.\n     * @param delta - The time between the last frame and the current one in seconds.\n     */\n    update(renderer, inputBuffer, delta = 0) { }\n    /**\n     * Updates the size of this effect.\n     *\n     * You may override this method in case you want to be informed about the main\n     * render size.\n     *\n     * The {@link EffectPass} calls this method before this effect is initialized\n     * and every time its own size is updated.\n     */\n    setSize(width, height) { }\n    /**\n     * Performs initialization tasks.\n     *\n     * By overriding this method you gain access to the renderer. You'll also be\n     * able to configure your custom render targets to use the appropriate format\n     * (RGB or RGBA).\n     *\n     * The provided renderer can be used to warm up special off-screen render\n     * targets by performing a preliminary render operation.\n     *\n     * The {@link EffectPass} calls this method during its own initialization\n     * which happens after the size has been set.\n     *\n     * @param renderer - The renderer.\n     * @param alpha - Whether the renderer uses the alpha channel or not.\n     * @example if(!alpha) this.myRenderTarget.texture.format = RGBFormat;\n     */\n    initialize(renderer, alpha) { }\n    /**\n     * Performs a shallow search for properties that define a dispose method and\n     * deletes them. The effect will be inoperative after this method was called!\n     *\n     * Disposable objects:\n     *  - render targets\n     *  - materials\n     *  - textures\n     *\n     * The {@link EffectPass} calls this method when it is being destroyed. Do not\n     * call this method directly.\n     */\n    dispose() {\n        for (const key of Object.keys(this)) {\n            if (this[key] !== null && typeof this[key].dispose === 'function') {\n                this[key].dispose();\n                this[key] = null;\n            }\n        }\n    }\n}\nexports.Effect = Effect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Section_1 = require(\"./Section\");\nexports.Section = Section_1.Section;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Finds and collects substrings that match the given regular expression.\n *\n * @param regExp - A regular expression.\n * @param string - A string.\n * @return The matching substrings.\n */\nfunction findSubstrings(regExp, str) {\n    const substrings = [];\n    let result;\n    // tslint:disable-next-line:no-conditional-assignment\n    while ((result = regExp.exec(str)) !== null) {\n        substrings.push(result[1]);\n    }\n    return substrings;\n}\nexports.findSubstrings = findSubstrings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Prefixes substrings within the given strings.\n *\n * @param prefix - A prefix.\n * @param substrings - The substrings.\n * @param strings - A collection of named strings.\n */\nfunction prefixSubstrings(prefix, substrings, strings) {\n    let prefixed;\n    let regExp;\n    for (const substring of substrings) {\n        // tslint:disable-next-line:prefer-template\n        prefixed = '$1' + prefix + substring.charAt(0).toUpperCase() + substring.slice(1);\n        // tslint:disable-next-line:prefer-template\n        regExp = new RegExp('([^\\\\.])(\\\\b' + substring + '\\\\b)', 'g');\n        for (const entry of strings.entries()) {\n            if (entry[1] !== null) {\n                strings.set(entry[0], entry[1].replace(regExp, prefixed));\n            }\n        }\n    }\n}\nexports.prefixSubstrings = prefixSubstrings;\n","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./core\"));\n__export(require(\"./effects\"));\n// export * from './images';\n__export(require(\"./materials\"));\n__export(require(\"./passes\"));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EffectComposer_1 = require(\"./EffectComposer\");\nexports.EffectComposer = EffectComposer_1.EffectComposer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst passes_1 = require(\"../passes\");\nconst materials_1 = require(\"../materials\");\n/**\n * The EffectComposer may be used in place of a normal WebGLRenderer.\n *\n * The auto clear behaviour of the provided renderer will be disabled to prevent\n * unnecessary clear operations.\n *\n * It is common practice to use a {@link RenderPass} as the first pass to\n * automatically clear the screen and render the scene to a texture for further\n * processing.\n */\nclass EffectComposer {\n    /**\n     * Constructs a new effect composer.\n     * @param renderer- The renderer that should be used.\n     * @param options - The options.\n     */\n    constructor(renderer = null, partialOptions = {}) {\n        this.renderer = renderer;\n        /**\n         * The input buffer.\n         *\n         * Reading from and writing to the same render target should be avoided.\n         * Therefore, two seperate yet identical buffers are used.\n         */\n        this.inputBuffer = null;\n        /**\n         * The output buffer.\n         */\n        this.outputBuffer = null;\n        /**\n         * A copy pass used for copying masked scenes.\n         */\n        this.copyPass = new passes_1.ShaderPass(new materials_1.CopyMaterial());\n        /**\n         * The passes.\n         */\n        this.passes = [];\n        const options = {\n            depthBuffer: true,\n            stencilBuffer: false,\n            ...partialOptions,\n        };\n        if (this.renderer !== null) {\n            this.renderer.autoClear = false;\n            this.inputBuffer = this.createBuffer(options.depthBuffer, options.stencilBuffer);\n            this.outputBuffer = this.inputBuffer.clone();\n        }\n    }\n    /**\n     * Replaces the current renderer with the given one. The DOM element of the\n     * current renderer will automatically be removed from its parent node and the\n     * DOM element of the new renderer will take its place.\n     *\n     * The auto clear mechanism of the provided renderer will be disabled.\n     *\n     * @param renderer New renderer.\n     * @return The old renderer.\n     */\n    replaceRenderer(renderer) {\n        const oldRenderer = this.renderer;\n        let parent;\n        let oldSize;\n        let newSize;\n        if (oldRenderer !== null && oldRenderer !== renderer) {\n            this.renderer = renderer;\n            this.renderer.autoClear = false;\n            parent = oldRenderer.domElement.parentNode;\n            oldSize = oldRenderer.getSize();\n            newSize = renderer.getSize();\n            if (parent !== null) {\n                parent.removeChild(oldRenderer.domElement);\n                parent.appendChild(renderer.domElement);\n            }\n            if (oldSize.width !== newSize.width || oldSize.height !== newSize.height) {\n                this.setSize();\n            }\n        }\n        return oldRenderer;\n    }\n    /**\n     * Retrieves the most relevant depth texture for the pass at the given index.\n     * @param index - The index of the pass that needs a depth texture.\n     * @return The depth texture, or null if there is none.\n     */\n    getDepthTexture(index) {\n        const passes = this.passes;\n        let depthTexture = null;\n        let inputBuffer = true;\n        let i;\n        let pass;\n        for (i = 0; i < index; ++i) {\n            pass = passes[i];\n            if (pass.needsSwap) {\n                inputBuffer = !inputBuffer;\n            }\n            else if (pass instanceof passes_1.RenderPass) {\n                depthTexture = (inputBuffer ? this.inputBuffer : this.outputBuffer).depthTexture;\n            }\n        }\n        return depthTexture;\n    }\n    /**\n     * Creates two depth texture attachments, one for the input buffer and one for\n     * the output buffer.\n     *\n     * Depth will be written to the depth texture when something is rendered into\n     * the respective render target and the involved materials have `depthWrite`\n     * enabled. Under normal circumstances, only a {@link RenderPass} will render\n     * depth.\n     *\n     * When a shader reads from a depth texture and writes to a render target that\n     * uses the same depth texture attachment, the depth information will be lost.\n     * This happens even if `depthWrite` is disabled. For that reason, two\n     * separate depth textures are used.\n     */\n    createDepthTexture(width, height) {\n        const depthTexture = new three_1.DepthTexture(width, height);\n        if (this.inputBuffer.stencilBuffer) {\n            depthTexture.format = three_1.DepthStencilFormat;\n            depthTexture.type = three_1.UnsignedInt248Type;\n        }\n        this.inputBuffer.depthTexture = depthTexture;\n        this.outputBuffer.depthTexture = depthTexture.clone();\n    }\n    /**\n     * Creates a new render target by replicating the renderer's canvas.\n     *\n     * The created render target uses a linear filter for texel minification and\n     * magnification. Its render texture format depends on whether the renderer\n     * uses the alpha channel. Mipmaps are disabled.\n     *\n     * @param depthBuffer - Whether the render target should have a depth buffer.\n     * @param stencilBuffer - Whether the render target should have a stencil buffer.\n     * @return A new render target that equals the renderer's canvas.\n     */\n    createBuffer(depthBuffer, stencilBuffer) {\n        const drawingBufferSize = this.renderer.getDrawingBufferSize();\n        const alpha = this.renderer.context.getContextAttributes().alpha;\n        const renderTarget = new three_1.WebGLRenderTarget(drawingBufferSize.width, drawingBufferSize.height, {\n            minFilter: three_1.LinearFilter,\n            magFilter: three_1.LinearFilter,\n            format: alpha ? three_1.RGBAFormat : three_1.RGBFormat,\n            depthBuffer,\n            stencilBuffer,\n        });\n        renderTarget.texture.name = 'EffectComposer.Buffer';\n        renderTarget.texture.generateMipmaps = false;\n        return renderTarget;\n    }\n    /**\n     * Adds a pass, optionally at a specific index.\n     *\n     * @param pass - A new pass.\n     * @param index - An index at which the pass should be inserted.\n     */\n    addPass(pass, index) {\n        const drawingBufferSize = this.renderer.getDrawingBufferSize();\n        pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n        pass.initialize(this.renderer, this.renderer.context.getContextAttributes().alpha);\n        if (index !== undefined) {\n            this.passes.splice(index, 0, pass);\n        }\n        else {\n            index = this.passes.push(pass) - 1;\n        }\n        if (pass.needsDepthTexture) {\n            if (this.inputBuffer.depthTexture === null) {\n                this.createDepthTexture(drawingBufferSize.width, drawingBufferSize.height);\n            }\n            pass.setDepthTexture(this.getDepthTexture(index));\n        }\n    }\n    /**\n     * Removes a pass.\n     */\n    removePass(pass) {\n        this.passes.splice(this.passes.indexOf(pass), 1);\n    }\n    /**\n     * Renders all enabled passes in the order in which they were added.\n     * @param delta - The time between the last frame and the current one in seconds.\n     */\n    render(delta) {\n        let inputBuffer = this.inputBuffer;\n        let outputBuffer = this.outputBuffer;\n        let stencilTest = false;\n        let context;\n        let state;\n        let buffer;\n        for (const pass of this.passes) {\n            if (pass.enabled) {\n                pass.render(this.renderer, inputBuffer, outputBuffer, delta, stencilTest);\n                if (pass.needsSwap) {\n                    if (stencilTest) {\n                        this.copyPass.renderToScreen = pass.renderToScreen;\n                        context = this.renderer.context;\n                        state = this.renderer.state;\n                        // Preserve the unaffected pixels.\n                        state.buffers.stencil.setFunc(context.NOTEQUAL, 1, 0xffffffff);\n                        this.copyPass.render(this.renderer, inputBuffer, outputBuffer);\n                        state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n                    }\n                    buffer = inputBuffer;\n                    inputBuffer = outputBuffer;\n                    outputBuffer = buffer;\n                }\n                if (pass instanceof passes_1.MaskPass) {\n                    stencilTest = true;\n                }\n                else if (pass instanceof passes_1.ClearMaskPass) {\n                    stencilTest = false;\n                }\n            }\n        }\n    }\n    /**\n     * Sets the size of the buffers and the renderer's output canvas.\n     *\n     * Every pass will be informed of the new size. It's up to each pass how that\n     * information is used.\n     *\n     * If no width or height is specified, the render targets and passes will be\n     * updated with the current size of the renderer.\n     */\n    setSize(width, height) {\n        let size;\n        if (width === undefined || height === undefined) {\n            size = this.renderer.getSize();\n            width = size.width;\n            height = size.height;\n        }\n        // Update the logical render size.\n        this.renderer.setSize(width, height);\n        // The drawing buffer size takes the device pixel ratio into account.\n        const drawingBufferSize = this.renderer.getDrawingBufferSize();\n        this.inputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n        this.outputBuffer.setSize(drawingBufferSize.width, drawingBufferSize.height);\n        for (const pass of this.passes) {\n            pass.setSize(drawingBufferSize.width, drawingBufferSize.height);\n        }\n    }\n    /**\n     * Resets this composer by deleting all passes and creating new buffers.\n     */\n    reset() {\n        const renderTarget = this.createBuffer(this.inputBuffer.depthBuffer, this.inputBuffer.stencilBuffer);\n        this.dispose();\n        // Reanimate.\n        this.inputBuffer = renderTarget;\n        this.outputBuffer = renderTarget.clone();\n        this.copyPass = new passes_1.ShaderPass(new materials_1.CopyMaterial());\n    }\n    /**\n     * Destroys this composer and all passes.\n     *\n     * This method deallocates all disposable objects created by the passes. It\n     * also deletes the main frame buffers of this composer.\n     */\n    dispose() {\n        for (const pass of this.passes)\n            pass.dispose();\n        this.passes = [];\n        if (this.inputBuffer !== null) {\n            this.inputBuffer.dispose();\n            this.inputBuffer = null;\n        }\n        if (this.outputBuffer !== null) {\n            this.outputBuffer.dispose();\n            this.outputBuffer = null;\n        }\n        this.copyPass.dispose();\n    }\n}\nexports.EffectComposer = EffectComposer;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lib_1 = require(\"./lib\");\nconst Pass_1 = require(\"./Pass\");\n/**\n * A pass that disables the stencil test.\n */\nclass ClearMaskPass extends Pass_1.Pass {\n    constructor() {\n        super(lib_1.PassName.ClearMask);\n        this.needsSwap = false;\n    }\n    /**\n     * Disables the global stencil test.\n     */\n    render(renderer) {\n        renderer.state.buffers.stencil.setTest(false);\n    }\n}\nexports.ClearMaskPass = ClearMaskPass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PassName;\n(function (PassName) {\n    PassName[\"Clear\"] = \"clear\";\n    PassName[\"ClearMask\"] = \"clearMask\";\n    PassName[\"Effect\"] = \"effect\";\n    PassName[\"Mask\"] = \"mask\";\n    PassName[\"Render\"] = \"render\";\n    PassName[\"Shader\"] = \"shader\";\n})(PassName = exports.PassName || (exports.PassName = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst effects_1 = require(\"../effects\");\nconst materials_1 = require(\"../materials\");\nconst Pass_1 = require(\"./Pass\");\nconst lib_1 = require(\"./lib\");\nconst utils_1 = require(\"./utils\");\n/**\n * An effect pass.\n *\n * Use this pass to combine {@link Effect} instances.\n */\nclass EffectPass extends Pass_1.Pass {\n    /**\n     * Constructs a new effect pass.\n     * The provided effects will be organized and merged for optimal performance.\n     *\n     * @param camera - The main camera. The camera's type and settings will be available to all effects.\n     * @param effects - The effects that will be rendered by this pass.\n     */\n    constructor(mainCamera, ...effects) {\n        super(lib_1.PassName.Effect);\n        this.mainCamera = mainCamera;\n        /**\n         * Indicates whether this pass should skip rendering.\n         * Effects will still be updated, even if this flag is true.\n         */\n        this.skipRendering = false;\n        /** Indicates whether dithering is enabled. */\n        this.quantize = false;\n        /** The amount of shader uniforms that this pass uses. */\n        this.uniforms = 0;\n        /** The amount of shader varyings that this pass uses. */\n        this.varyings = 0;\n        /** A time offset. Elapsed time will start at this value. */\n        this.minTime = 1.0;\n        /** The maximum time. If the elapsed time exceeds this value, it will be reset. */\n        this.maxTime = 1e3;\n        this.effects = effects.sort((a, b) => (b.attributes - a.attributes));\n        this.setFullscreenMaterial(this.createMaterial());\n    }\n    /**\n     * Indicates whether dithering is enabled.\n     * Color quantization reduces banding artifacts but degrades performance.\n     */\n    get dithering() {\n        return this.quantize;\n    }\n    /**\n     * Enables or disables dithering.\n     * Note that some effects like bloom have their own dithering setting.\n     */\n    set dithering(value) {\n        if (this.quantize !== value) {\n            this.getFullscreenMaterials().forEach(material => {\n                material.dithering = value;\n                material.needsUpdate = true;\n            });\n            this.quantize = value;\n        }\n    }\n    /**\n     * Creates a compound shader material.\n     *\n     * @return The new material.\n     */\n    createMaterial() {\n        const blendRegExp = /\\bblend\\b/g;\n        const shaderParts = new Map([\n            [materials_1.Section.FRAGMENT_HEAD, ''],\n            [materials_1.Section.FRAGMENT_MAIN_UV, ''],\n            [materials_1.Section.FRAGMENT_MAIN_IMAGE, ''],\n            [materials_1.Section.VERTEX_HEAD, ''],\n            [materials_1.Section.VERTEX_MAIN_SUPPORT, ''],\n        ]);\n        const blendModes = new Map();\n        const defines = new Map();\n        const uniforms = new Map();\n        const extensions = new Set();\n        let id = 0;\n        let varyings = 0;\n        let attributes = 0;\n        let transformedUv = false;\n        let readDepth = false;\n        let result;\n        for (const effect of this.effects) {\n            if (effect.blendMode.blendFunction === effects_1.BlendFunction.SKIP) {\n                continue;\n            }\n            else if ((attributes & effects_1.EffectAttribute.CONVOLUTION) !== 0 && (effect.attributes & effects_1.EffectAttribute.CONVOLUTION) !== 0) {\n                console.error('Convolution effects cannot be merged', effect);\n            }\n            else {\n                attributes |= effect.attributes;\n                result = utils_1.integrateEffect(('e' + id++), effect, shaderParts, blendModes, defines, uniforms, attributes);\n                varyings += result.varyings.length;\n                transformedUv = transformedUv || result.transformedUv;\n                readDepth = readDepth || result.readDepth;\n                if (effect.extensions !== null) {\n                    // Collect the WebGL extensions that are required by this effect.\n                    for (const extension of effect.extensions) {\n                        extensions.add(extension);\n                    }\n                }\n            }\n        }\n        // Integrate the relevant blend functions.\n        for (const blendMode of blendModes.values()) {\n            shaderParts.set(materials_1.Section.FRAGMENT_HEAD, `${shaderParts.get(materials_1.Section.FRAGMENT_HEAD)}${blendMode.getShaderCode().replace(blendRegExp, 'blend' + blendMode.blendFunction)}\\n`);\n        }\n        // Check if any effect relies on depth.\n        if ((attributes & effects_1.EffectAttribute.DEPTH) !== 0) {\n            // Only read depth if any effect actually uses this information.\n            if (readDepth) {\n                shaderParts.set(materials_1.Section.FRAGMENT_MAIN_IMAGE, `float depth = readDepth(UV);\\n\\n\\t${shaderParts.get(materials_1.Section.FRAGMENT_MAIN_IMAGE)}`);\n            }\n            this.needsDepthTexture = true;\n        }\n        // Check if any effect transforms UVs in the fragment shader.\n        if (transformedUv) {\n            shaderParts.set(materials_1.Section.FRAGMENT_MAIN_UV, `vec2 transformedUv = vUv;\\n${shaderParts.get(materials_1.Section.FRAGMENT_MAIN_UV)}`);\n            defines.set('UV', 'transformedUv');\n        }\n        else {\n            defines.set('UV', 'vUv');\n        }\n        shaderParts.forEach((value, key, map) => map.set(key, value.trim()));\n        this.uniforms = uniforms.size;\n        this.varyings = varyings;\n        this.skipRendering = (id === 0);\n        this.needsSwap = !this.skipRendering;\n        const material = new materials_1.EffectMaterial(shaderParts, defines, uniforms, this.mainCamera, this.dithering);\n        if (extensions.size > 0) {\n            // Enable required WebGL extensions.\n            for (const extension of extensions) {\n                material.extensions[extension] = true;\n            }\n        }\n        return material;\n    }\n    /**\n     * Destroys the current fullscreen shader material and builds a new one.\n     *\n     * Warning: This method performs a relatively expensive shader recompilation.\n     */\n    recompile() {\n        let width = 0;\n        let height = 0;\n        let depthTexture = null;\n        let depthPacking = 0;\n        this.getFullscreenMaterials()\n            .filter((mat) => mat instanceof materials_1.EffectMaterial)\n            .forEach(material => {\n            const resolution = material.uniforms.resolution.value;\n            width = resolution.x;\n            height = resolution.y;\n            depthTexture = material.uniforms.depthBuffer.value;\n            depthPacking = material.depthPacking;\n            material.dispose();\n            this.uniforms = 0;\n            this.varyings = 0;\n        });\n        const newMaterial = this.createMaterial();\n        newMaterial.setSize(width, height);\n        this.setFullscreenMaterial(newMaterial);\n        this.setDepthTexture(depthTexture, depthPacking);\n    }\n    /**\n     * Returns the current depth texture.\n     *\n     * @return The current depth texture, or null if there is none.\n     */\n    getDepthTexture() {\n        const materials = this.getFullscreenMaterials();\n        return materials.length > 0 ? materials[0].uniforms.depthBuffer.value : null;\n    }\n    /**\n     * Sets the depth texture.\n     *\n     * @param depthTexture - A depth texture.\n     * @param depthPacking - The depth packing.\n     */\n    setDepthTexture(depthTexture, depthPacking = 0) {\n        this.getFullscreenMaterialsOfType(materials_1.EffectMaterial).forEach(material => {\n            material.uniforms.depthBuffer.value = depthTexture;\n            material.depthPacking = depthPacking;\n            material.needsUpdate = true;\n        });\n        for (const effect of this.effects) {\n            effect.setDepthTexture(depthTexture, depthPacking);\n        }\n        this.needsDepthTexture = (depthTexture === null);\n    }\n    /**\n     * Renders the effect.\n     *\n     * @param renderer - The renderer.\n     * @param inputBuffer - A frame buffer that contains the result of the previous pass.\n     * @param outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n     * @param delta - The time between the last frame and the current one in seconds.\n     */\n    render(renderer, inputBuffer, outputBuffer, delta = 1) {\n        for (const effect of this.effects) {\n            effect.update(renderer, inputBuffer, delta);\n        }\n        if (!this.skipRendering || this.renderToScreen) {\n            this.getFullscreenMaterials().forEach(material => {\n                const time = material.uniforms.time.value + delta;\n                material.uniforms.inputBuffer.value = inputBuffer.texture;\n                material.uniforms.time.value = (time <= this.maxTime) ? time : this.minTime;\n                renderer.render(this.scene, this.camera, this.renderToScreen ? undefined : outputBuffer);\n            });\n        }\n    }\n    /**\n     * Updates the size of this pass.\n     *\n     * @param width - The width.\n     * @param height - The height.\n     */\n    setSize(width, height) {\n        this.getFullscreenMaterials().forEach(material => {\n            if ('setSize' in material)\n                material.setSize(width, height);\n        });\n        for (const effect of this.effects) {\n            effect.setSize(width, height);\n        }\n    }\n    /**\n     * Performs initialization tasks.\n     *\n     * @param renderer - The renderer.\n     * @param alpha - Whether the renderer uses the alpha channel or not.\n     */\n    initialize(renderer, alpha) {\n        const capabilities = renderer.capabilities;\n        let max = Math.min(capabilities.maxFragmentUniforms, capabilities.maxVertexUniforms);\n        if (this.uniforms > max) {\n            console.warn(`The current rendering context doesn't support more than ${max} uniforms, but ${this.uniforms} were defined`);\n        }\n        max = capabilities.maxVaryings;\n        if (this.varyings > max) {\n            console.warn(`The current rendering context doesn't support more than ${max} varyings, but ${this.varyings} were defined`);\n        }\n        for (const effect of this.effects) {\n            effect.initialize(renderer, alpha);\n        }\n    }\n    /**\n     * Deletes disposable objects.\n     *\n     * This pass will be inoperative after this method was called!\n     */\n    dispose() {\n        super.dispose();\n        for (const effect of this.effects) {\n            effect.dispose();\n        }\n    }\n}\nexports.EffectPass = EffectPass;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst BlendFunction_1 = require(\"./BlendFunction\");\nconst shader_frag_1 = __importDefault(require(\"./glsl/add/shader.frag\"));\nconst shader_frag_2 = __importDefault(require(\"./glsl/alpha/shader.frag\"));\nconst shader_frag_3 = __importDefault(require(\"./glsl/average/shader.frag\"));\nconst shader_frag_4 = __importDefault(require(\"./glsl/color-burn/shader.frag\"));\nconst shader_frag_5 = __importDefault(require(\"./glsl/color-dodge/shader.frag\"));\nconst shader_frag_6 = __importDefault(require(\"./glsl/darken/shader.frag\"));\nconst shader_frag_7 = __importDefault(require(\"./glsl/difference/shader.frag\"));\nconst shader_frag_8 = __importDefault(require(\"./glsl/exclusion/shader.frag\"));\nconst shader_frag_9 = __importDefault(require(\"./glsl/lighten/shader.frag\"));\nconst shader_frag_10 = __importDefault(require(\"./glsl/multiply/shader.frag\"));\nconst shader_frag_11 = __importDefault(require(\"./glsl/divide/shader.frag\"));\nconst shader_frag_12 = __importDefault(require(\"./glsl/negation/shader.frag\"));\nconst shader_frag_13 = __importDefault(require(\"./glsl/normal/shader.frag\"));\nconst shader_frag_14 = __importDefault(require(\"./glsl/overlay/shader.frag\"));\nconst shader_frag_15 = __importDefault(require(\"./glsl/reflect/shader.frag\"));\nconst shader_frag_16 = __importDefault(require(\"./glsl/screen/shader.frag\"));\nconst shader_frag_17 = __importDefault(require(\"./glsl/soft-light/shader.frag\"));\nconst shader_frag_18 = __importDefault(require(\"./glsl/subtract/shader.frag\"));\n/** A blend mode. */\nclass BlendMode {\n    /**\n     * Constructs a new blend mode.\n     *\n     * @param blendFunction - The blend function to use.\n     * @param opacity - The opacity of the color that will be blended with the base color.\n     */\n    constructor(blendFunction, opacity = 1.0) {\n        this.blendFunction = blendFunction;\n        this.opacity = new three_1.Uniform(opacity);\n    }\n    /** Returns the blend function shader code, or null for `SKIP` blend function. */\n    getShaderCode() {\n        switch (this.blendFunction) {\n            case BlendFunction_1.BlendFunction.SKIP: return null;\n            case BlendFunction_1.BlendFunction.ADD: return shader_frag_1.default;\n            case BlendFunction_1.BlendFunction.ALPHA: return shader_frag_2.default;\n            case BlendFunction_1.BlendFunction.AVERAGE: return shader_frag_3.default;\n            case BlendFunction_1.BlendFunction.COLOR_BURN: return shader_frag_4.default;\n            case BlendFunction_1.BlendFunction.COLOR_DODGE: return shader_frag_5.default;\n            case BlendFunction_1.BlendFunction.DARKEN: return shader_frag_6.default;\n            case BlendFunction_1.BlendFunction.DIFFERENCE: return shader_frag_7.default;\n            case BlendFunction_1.BlendFunction.EXCLUSION: return shader_frag_8.default;\n            case BlendFunction_1.BlendFunction.LIGHTEN: return shader_frag_9.default;\n            case BlendFunction_1.BlendFunction.MULTIPLY: return shader_frag_10.default;\n            case BlendFunction_1.BlendFunction.DIVIDE: return shader_frag_11.default;\n            case BlendFunction_1.BlendFunction.NEGATION: return shader_frag_12.default;\n            case BlendFunction_1.BlendFunction.NORMAL: return shader_frag_13.default;\n            case BlendFunction_1.BlendFunction.OVERLAY: return shader_frag_14.default;\n            case BlendFunction_1.BlendFunction.REFLECT: return shader_frag_15.default;\n            case BlendFunction_1.BlendFunction.SCREEN: return shader_frag_16.default;\n            case BlendFunction_1.BlendFunction.SOFT_LIGHT: return shader_frag_17.default;\n            case BlendFunction_1.BlendFunction.SUBTRACT: return shader_frag_18.default;\n        }\n    }\n}\nexports.BlendMode = BlendMode;\n","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn min(x + y, 1.0) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn y * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, y.a), x.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn (x + y) * 0.5 * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn min(x, y) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn abs(x - y) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn (x + y - 2.0 * x * y) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn max(x, y) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn x * y * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (y > 0.0) ? min(x / y, 1.0) : 1.0;\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn (1.0 - abs(1.0 - x - y)) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn y * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn (1.0 - (1.0 - x) * (1.0 - y)) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"float blend(const in float x, const in float y) {\\n\\n\\treturn (y < 0.5) ?\\n\\t\\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\\n\\t\\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\\n\\n}\\n\\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\\n\\n\\treturn z * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","module.exports = \"vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\\n\\n\\treturn max(x + y - 1.0, 0.0) * opacity + x * (1.0 - opacity);\\n\\n}\\n\\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\\n\\n\\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\\n\\n}\\n\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EffectName;\n(function (EffectName) {\n    EffectName[\"ChromaticAberration\"] = \"ChromaticAberrationEffect\";\n    EffectName[\"Glitch\"] = \"GlitchEffect\";\n})(EffectName = exports.EffectName || (exports.EffectName = {}));\n/**\n * An enumeration of effect attributes.\n * Attributes can be concatenated using the bitwise OR operator.\n *\n * @example\n * const attributes = EffectAttribute.CONVOLUTION | EffectAttribute.DEPTH;\n */\nvar EffectAttribute;\n(function (EffectAttribute) {\n    /* No attributes. Most effects don't need to specify any attributes. */\n    EffectAttribute[EffectAttribute[\"NONE\"] = 0] = \"NONE\";\n    /** Describes effects that require a depth texture. */\n    EffectAttribute[EffectAttribute[\"DEPTH\"] = 1] = \"DEPTH\";\n    /**\n     * Describes effects that fetch additional samples from the input buffer.\n     * There cannot be more than one effect with this attribute per {@link EffectPass}.\n     */\n    EffectAttribute[EffectAttribute[\"CONVOLUTION\"] = 2] = \"CONVOLUTION\";\n})(EffectAttribute = exports.EffectAttribute || (exports.EffectAttribute = {}));\n/** An enumeration of WebGL extensions. */\nvar WebGLExtension;\n(function (WebGLExtension) {\n    /** Enables derivatives by adding the functions dFdx, dFdy and fwidth. */\n    WebGLExtension[\"DERIVATIVES\"] = \"derivatives\";\n    /** Enables gl_FragDepthEXT to set a depth value of a fragment from within the fragment shader. */\n    WebGLExtension[\"FRAG_DEPTH\"] = \"fragDepth\";\n    /** Enables multiple render targets (MRT) support. */\n    WebGLExtension[\"DRAW_BUFFERS\"] = \"drawBuffers\";\n    /** Enables explicit control of texture LOD. */\n    WebGLExtension[\"SHADER_TEXTURE_LOD\"] = \"shaderTextureLOD\";\n})(WebGLExtension = exports.WebGLExtension || (exports.WebGLExtension = {}));\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst BlendFunction_1 = require(\"./blending/BlendFunction\");\nconst lib_1 = require(\"./lib\");\nconst Effect_1 = require(\"./Effect\");\nconst shader_frag_1 = __importDefault(require(\"./glsl/chromatic-aberration/shader.frag\"));\nconst shader_vert_1 = __importDefault(require(\"./glsl/chromatic-aberration/shader.vert\"));\n/**\n * A chromatic aberration effect.\n */\nclass ChromaticAberrationEffect extends Effect_1.Effect {\n    constructor(partialOptions = {}) {\n        const options = {\n            blendFunction: BlendFunction_1.BlendFunction.NORMAL,\n            offset: new three_1.Vector2(0.001, 0.0005),\n            ...partialOptions,\n        };\n        super(lib_1.EffectName.ChromaticAberration, shader_frag_1.default, {\n            attributes: lib_1.EffectAttribute.CONVOLUTION,\n            blendFunction: options.blendFunction,\n            uniforms: new Map([\n                ['offset', new three_1.Uniform(options.offset)],\n            ]),\n            vertexShader: shader_vert_1.default,\n        });\n    }\n    /**\n     * The color offset.\n     */\n    get offset() {\n        return this.uniforms.get('offset').value;\n    }\n    set offset(value) {\n        this.uniforms.get('offset').value = value;\n    }\n}\nexports.ChromaticAberrationEffect = ChromaticAberrationEffect;\n","module.exports = \"varying vec2 vUvR;\\nvarying vec2 vUvB;\\n\\nvoid mainImage(const in vec4 inputColor, const in vec2 uv, out vec4 outputColor) {\\n\\n\\tvec4 color = inputColor;\\n\\n\\tcolor.r = texture2D(inputBuffer, vUvR).r;\\n\\tcolor.b = texture2D(inputBuffer, vUvB).b;\\n\\n\\toutputColor = color;\\n\\n}\\n\"","module.exports = \"uniform vec2 offset;\\n\\nvarying vec2 vUvR;\\nvarying vec2 vUvB;\\n\\nvoid mainSupport() {\\n\\n\\tvUvR = uv + offset;\\n\\tvUvB = uv - offset;\\n\\n}\\n\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * An enumeration of shader code placeholders.\n */\nvar Section;\n(function (Section) {\n    /**  A placeholder for function and variable declarations inside the fragment shader. */\n    Section[\"FRAGMENT_HEAD\"] = \"FRAGMENT_HEAD\";\n    /**  A placeholder for UV transformations inside the fragment shader. */\n    Section[\"FRAGMENT_MAIN_UV\"] = \"FRAGMENT_MAIN_UV\";\n    /**  A placeholder for color calculations inside the fragment shader. */\n    Section[\"FRAGMENT_MAIN_IMAGE\"] = \"FRAGMENT_MAIN_IMAGE\";\n    /**  A placeholder for function and variable declarations inside the vertex shader. */\n    Section[\"VERTEX_HEAD\"] = \"VERTEX_HEAD\";\n    /**  A placeholder for supporting calculations inside the vertex shader. */\n    Section[\"VERTEX_MAIN_SUPPORT\"] = \"VERTEX_MAIN_SUPPORT\";\n})(Section = exports.Section || (exports.Section = {}));\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst shader_frag_1 = __importDefault(require(\"./glsl/copy/shader.frag\"));\nconst shader_vert_1 = __importDefault(require(\"./glsl/common/shader.vert\"));\n/**\n * A simple copy shader material.\n */\nclass CopyMaterial extends three_1.ShaderMaterial {\n    constructor() {\n        super({\n            uniforms: {\n                inputBuffer: new three_1.Uniform(null),\n                opacity: new three_1.Uniform(1.0),\n            },\n            fragmentShader: shader_frag_1.default,\n            vertexShader: shader_vert_1.default,\n            depthWrite: false,\n            depthTest: false,\n        });\n    }\n}\nexports.CopyMaterial = CopyMaterial;\n","module.exports = \"uniform sampler2D inputBuffer;\\nuniform float opacity;\\n\\nvarying vec2 vUv;\\n\\nvoid main() {\\n\\n\\tvec4 texel = texture2D(inputBuffer, vUv);\\n\\tgl_FragColor = opacity * texel;\\n\\n}\\n\"","module.exports = \"varying vec2 vUv;\\n\\nvoid main() {\\n\\n\\tvUv = uv;\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\n}\\n\"","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst three_1 = require(\"three\");\nconst lib_1 = require(\"./lib\");\nconst shader_frag_1 = __importDefault(require(\"./glsl/effect/shader.frag\"));\nconst shader_vert_1 = __importDefault(require(\"./glsl/effect/shader.vert\"));\n/**\n * An effect material for compound shaders.\n *\n * This material supports dithering.\n */\nclass EffectMaterial extends three_1.ShaderMaterial {\n    /**\n     * Constructs a new effect material.\n     *\n     * @param shaderParts - A collection of shader snippets.\n     * @param defines - A collection of preprocessor macro definitions.\n     * @param uniforms - A collection of uniforms.\n     * @param camera - A camera.\n     * @param dithering - Whether dithering should be enabled.\n     */\n    constructor(shaderParts, defines, uniforms, camera = null, dithering = false) {\n        super({\n            defines: {\n                DEPTH_PACKING: '0',\n            },\n            uniforms: {\n                inputBuffer: new three_1.Uniform(null),\n                depthBuffer: new three_1.Uniform(null),\n                resolution: new three_1.Uniform(new three_1.Vector2()),\n                texelSize: new three_1.Uniform(new three_1.Vector2()),\n                cameraNear: new three_1.Uniform(0.3),\n                cameraFar: new three_1.Uniform(1000.0),\n                aspect: new three_1.Uniform(1.0),\n                time: new three_1.Uniform(0.0),\n            },\n            fragmentShader: shader_frag_1.default\n                .replace(lib_1.Section.FRAGMENT_HEAD, shaderParts.get(lib_1.Section.FRAGMENT_HEAD))\n                .replace(lib_1.Section.FRAGMENT_MAIN_UV, shaderParts.get(lib_1.Section.FRAGMENT_MAIN_UV))\n                .replace(lib_1.Section.FRAGMENT_MAIN_IMAGE, shaderParts.get(lib_1.Section.FRAGMENT_MAIN_IMAGE)),\n            vertexShader: shader_vert_1.default\n                .replace(lib_1.Section.VERTEX_HEAD, shaderParts.get(lib_1.Section.VERTEX_HEAD))\n                .replace(lib_1.Section.VERTEX_MAIN_SUPPORT, shaderParts.get(lib_1.Section.VERTEX_MAIN_SUPPORT)),\n            dithering,\n            depthWrite: false,\n            depthTest: false,\n        });\n        if (defines !== null) {\n            for (const entry of defines.entries()) {\n                this.defines[entry[0]] = entry[1];\n            }\n        }\n        if (uniforms !== null) {\n            for (const entry of uniforms.entries()) {\n                this.uniforms[entry[0]] = entry[1];\n            }\n        }\n        this.adoptCameraSettings(camera);\n    }\n    /**\n     * The current depth packing.\n     */\n    get depthPacking() {\n        return Number.parseInt(this.defines.DEPTH_PACKING, 10);\n    }\n    /**\n     * Sets the depth packing.\n     *\n     * Use `BasicDepthPacking` or `RGBADepthPacking` if your depth texture\n     * contains packed depth.\n     *\n     * You'll need to call {@link EffectPass#recompile} after changing this value.\n     */\n    set depthPacking(value) {\n        this.defines.DEPTH_PACKING = value.toFixed(0);\n    }\n    /**\n     * Sets the resolution.\n     *\n     * @param width - The width.\n     * @param height - The height.\n     */\n    setSize(width, height) {\n        width = Math.max(width, 1.0);\n        height = Math.max(height, 1.0);\n        this.uniforms.resolution.value.set(width, height);\n        this.uniforms.texelSize.value.set(1.0 / width, 1.0 / height);\n        this.uniforms.aspect.value = width / height;\n    }\n    /**\n     * Adopts the settings of the given camera.\n     */\n    adoptCameraSettings(camera = null) {\n        if (camera !== null) {\n            if (camera instanceof three_1.PerspectiveCamera) {\n                this.uniforms.cameraNear.value = camera.near;\n                this.uniforms.cameraFar.value = camera.far;\n                this.defines.PERSPECTIVE_CAMERA = '1';\n            }\n            else {\n                delete this.defines.PERSPECTIVE_CAMERA;\n            }\n        }\n    }\n}\nexports.EffectMaterial = EffectMaterial;\n","module.exports = \"#include <common>\\n#include <packing>\\n#include <dithering_pars_fragment>\\n\\nuniform sampler2D inputBuffer;\\nuniform sampler2D depthBuffer;\\n\\nuniform vec2 resolution;\\nuniform vec2 texelSize;\\n\\nuniform float cameraNear;\\nuniform float cameraFar;\\nuniform float aspect;\\nuniform float time;\\n\\nvarying vec2 vUv;\\n\\nfloat readDepth(const in vec2 uv) {\\n\\n\\t#if DEPTH_PACKING == 3201\\n\\n\\t\\treturn unpackRGBAToDepth(texture2D(depthBuffer, uv));\\n\\n\\t#else\\n\\n\\t\\treturn texture2D(depthBuffer, uv).r;\\n\\n\\t#endif\\n\\n}\\n\\nFRAGMENT_HEAD\\n\\nvoid main() {\\n\\n\\tFRAGMENT_MAIN_UV\\n\\n\\tvec4 color0 = texture2D(inputBuffer, UV);\\n\\tvec4 color1 = vec4(0.0);\\n\\n\\tFRAGMENT_MAIN_IMAGE\\n\\n\\tgl_FragColor = color0;\\n\\n\\t#include <dithering_fragment>\\n\\n}\\n\"","module.exports = \"uniform vec2 resolution;\\nuniform vec2 texelSize;\\n\\nuniform float cameraNear;\\nuniform float cameraFar;\\nuniform float aspect;\\nuniform float time;\\n\\nvarying vec2 vUv;\\n\\nVERTEX_HEAD\\n\\nvoid main() {\\n\\n\\tvUv = uv;\\n\\n\\tVERTEX_MAIN_SUPPORT\\n\\n\\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\\n\\n}\\n\"","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar FindSubstringsUtil_1 = require(\"./FindSubstringsUtil\");\nexports.findSubstrings = FindSubstringsUtil_1.findSubstrings;\nvar IntegrateEffectUtil_1 = require(\"./IntegrateEffectUtil\");\nexports.integrateEffect = IntegrateEffectUtil_1.integrateEffect;\nvar PrefixSubstringsUtils_1 = require(\"./PrefixSubstringsUtils\");\nexports.prefixSubstrings = PrefixSubstringsUtils_1.prefixSubstrings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst effects_1 = require(\"../../effects\");\nconst materials_1 = require(\"../../materials\");\nconst FindSubstringsUtil_1 = require(\"./FindSubstringsUtil\");\nconst PrefixSubstringsUtils_1 = require(\"./PrefixSubstringsUtils\");\n/**\n * Integrates the given effect.\n *\n * @param prefix - A prefix.\n * @param effect - An effect.\n * @param shaderParts - The shader parts.\n * @param blendModes - The blend modes.\n * @param defines - The macro definitions.\n * @param uniforms - The uniforms.\n * @param attributes - The global, collective attributes.\n * @return The results.\n */\nfunction integrateEffect(prefix, effect, shaderParts, blendModes, defines, uniforms, attributes) {\n    const functionRegExp = /(?:\\w+\\s+(\\w+)\\([\\w\\s,]*\\)\\s*{[^}]+})/g;\n    const varyingRegExp = /(?:varying\\s+\\w+\\s+(\\w*))/g;\n    const blendMode = effect.blendMode;\n    const shaders = new Map([\n        ['fragment', effect.fragmentShader],\n        ['vertex', effect.vertexShader],\n    ]);\n    const mainImageExists = effect.fragmentShader.includes('mainImage');\n    const mainUvExists = effect.fragmentShader.includes('mainUv');\n    let varyings = [];\n    let names = [];\n    let transformedUv = false;\n    let readDepth = false;\n    if (shaders.get('fragment') === undefined) {\n        console.error('Missing fragment shader', effect);\n    }\n    else if (mainUvExists && (attributes & effects_1.EffectAttribute.CONVOLUTION) !== 0) {\n        console.error('Effects that transform UV coordinates are incompatible with convolution effects', effect);\n    }\n    else if (!mainImageExists && !mainUvExists) {\n        console.error('The fragment shader contains neither a mainImage nor a mainUv function', effect);\n    }\n    else {\n        if (mainUvExists) {\n            shaderParts.set(materials_1.Section.FRAGMENT_MAIN_UV, shaderParts.get(materials_1.Section.FRAGMENT_MAIN_UV) + '\\t' + prefix + 'MainUv(UV);\\n');\n            transformedUv = true;\n        }\n        if (shaders.get('vertex') !== null && shaders.get('vertex').indexOf('mainSupport') >= 0) {\n            shaderParts.set(materials_1.Section.VERTEX_MAIN_SUPPORT, shaderParts.get(materials_1.Section.VERTEX_MAIN_SUPPORT) + '\\t' + prefix + 'MainSupport();\\n');\n            varyings = varyings.concat(FindSubstringsUtil_1.findSubstrings(varyingRegExp, shaders.get('vertex')));\n            names = names.concat(varyings).concat(FindSubstringsUtil_1.findSubstrings(functionRegExp, shaders.get('vertex')));\n        }\n        names = names\n            .concat(FindSubstringsUtil_1.findSubstrings(functionRegExp, shaders.get('fragment')))\n            .concat(Array.from(effect.uniforms.keys()))\n            .concat(Array.from(effect.defines.keys()));\n        // Store prefixed uniforms and macros.\n        effect.uniforms.forEach((value, key) => uniforms.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\n        effect.defines.forEach((value, key) => defines.set(prefix + key.charAt(0).toUpperCase() + key.slice(1), value));\n        // Prefix varyings, functions, uniforms and macros.\n        PrefixSubstringsUtils_1.prefixSubstrings(prefix, names, defines);\n        PrefixSubstringsUtils_1.prefixSubstrings(prefix, names, shaders);\n        // Collect unique blend modes.\n        blendModes.set(blendMode.blendFunction, blendMode);\n        if (mainImageExists) {\n            let str = prefix + 'MainImage(color0, UV, ';\n            // The effect may sample depth in a different shader.\n            if ((attributes & effects_1.EffectAttribute.DEPTH) !== 0 && shaders.get('fragment').indexOf('depth') >= 0) {\n                str += 'depth, ';\n                readDepth = true;\n            }\n            str += 'color1);\\n\\t';\n            // Include the blend opacity uniform of this effect.\n            const blendOpacity = prefix + 'BlendOpacity';\n            uniforms.set(blendOpacity, blendMode.opacity);\n            // Blend the result of this effect with the input color.\n            str += 'color0 = blend' + blendMode.blendFunction + '(color0, color1, ' + blendOpacity + ');\\n\\n\\t';\n            shaderParts.set(materials_1.Section.FRAGMENT_MAIN_IMAGE, shaderParts.get(materials_1.Section.FRAGMENT_MAIN_IMAGE) + str);\n            shaderParts.set(materials_1.Section.FRAGMENT_HEAD, shaderParts.get(materials_1.Section.FRAGMENT_HEAD) + 'uniform float ' + blendOpacity + ';\\n\\n');\n        }\n        // Include the modified code in the final shader.\n        shaderParts.set(materials_1.Section.FRAGMENT_HEAD, shaderParts.get(materials_1.Section.FRAGMENT_HEAD) + shaders.get('fragment') + '\\n');\n        if (shaders.get('vertex') !== null) {\n            shaderParts.set(materials_1.Section.VERTEX_HEAD, shaderParts.get(materials_1.Section.VERTEX_HEAD) + shaders.get('vertex') + '\\n');\n        }\n    }\n    return { varyings, transformedUv, readDepth };\n}\nexports.integrateEffect = integrateEffect;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lib_1 = require(\"./lib\");\nconst Pass_1 = require(\"./Pass\");\n/**\n * A mask pass.\n *\n * This pass requires that the input and output buffers have a stencil buffer.\n * You can enable the stencil buffer via the {@link EffectComposer} constructor.\n */\nclass MaskPass extends Pass_1.Pass {\n    /**\n     * Constructs a new mask pass.\n     *\n     * @param scene - The scene to render.\n     * @param camera - The camera to use.\n     */\n    constructor(scene, camera) {\n        super(lib_1.PassName.Mask, scene, camera);\n        /** Inverse flag */\n        this.inverse = false;\n        /** Stencil buffer clear flag. */\n        this.clearStencil = true;\n        this.needsSwap = false;\n    }\n    /**\n     * Renders the effect.\n     *\n     * @param renderer - The renderer.\n     * @param inputBuffer - A frame buffer that contains the result of the previous pass.\n     * @param outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n     */\n    render(renderer, inputBuffer, outputBuffer) {\n        const context = renderer.context;\n        const state = renderer.state;\n        const scene = this.scene;\n        const camera = this.camera;\n        const writeValue = this.inverse ? 0 : 1;\n        const clearValue = 1 - writeValue;\n        // Don't update color or depth.\n        state.buffers.color.setMask(0);\n        state.buffers.depth.setMask(0);\n        // Lock the buffers.\n        state.buffers.color.setLocked(true);\n        state.buffers.depth.setLocked(true);\n        // Configure the stencil.\n        state.buffers.stencil.setTest(true);\n        state.buffers.stencil.setOp(context.REPLACE, context.REPLACE, context.REPLACE);\n        state.buffers.stencil.setFunc(context.ALWAYS, writeValue, 0xffffffff);\n        state.buffers.stencil.setClear(clearValue);\n        // Clear the stencil.\n        if (this.clearStencil) {\n            if (this.renderToScreen) {\n                renderer.setRenderTarget();\n                renderer.clearStencil();\n            }\n            else {\n                renderer.setRenderTarget(inputBuffer);\n                renderer.clearStencil();\n                renderer.setRenderTarget(outputBuffer);\n                renderer.clearStencil();\n            }\n        }\n        // Draw the mask.\n        if (this.renderToScreen) {\n            renderer.render(scene, camera);\n        }\n        else {\n            renderer.render(scene, camera, inputBuffer);\n            renderer.render(scene, camera, outputBuffer);\n        }\n        // Unlock the buffers.\n        state.buffers.color.setLocked(false);\n        state.buffers.depth.setLocked(false);\n        // Only render where the stencil is set to 1.\n        state.buffers.stencil.setFunc(context.EQUAL, 1, 0xffffffff);\n        state.buffers.stencil.setOp(context.KEEP, context.KEEP, context.KEEP);\n    }\n}\nexports.MaskPass = MaskPass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst ClearPass_1 = require(\"./ClearPass\");\nconst Pass_1 = require(\"./Pass\");\nconst lib_1 = require(\"./lib\");\n/**\n * A pass that renders a given scene directly on screen or into the read buffer\n * for further processing.\n */\nclass RenderPass extends Pass_1.Pass {\n    /**\n     * Constructs a new render pass.\n     *\n     * @param scene The scene to render.\n     * @param camera The camera to use to render the scene.\n     * @param options Additional options.\n     */\n    constructor(scene, camera, partialOptions = {}) {\n        super(lib_1.PassName.Render, scene, camera);\n        this.scene = scene;\n        this.camera = camera;\n        this.overrideMaterial = null;\n        const options = {\n            overrideMaterial: null,\n            clearAlpha: 1,\n            clearDepth: false,\n            clear: true,\n            ...partialOptions,\n        };\n        this.needsSwap = false;\n        this.clearPass = new ClearPass_1.ClearPass(options);\n        this.overrideMaterial = options.overrideMaterial;\n        this.clearDepth = options.clearDepth;\n        this.clear = options.clear;\n    }\n    /**\n     * Renders the scene.\n     *\n     * @param renderer The renderer.\n     * @param inputBuffer A frame buffer that contains the result of the previous pass.\n     */\n    render(renderer, inputBuffer) {\n        const scene = this.scene;\n        const renderTarget = this.renderToScreen ? undefined : inputBuffer;\n        const overrideMaterial = scene.overrideMaterial;\n        if (this.clear) {\n            this.clearPass.renderToScreen = this.renderToScreen;\n            this.clearPass.render(renderer, inputBuffer);\n        }\n        else if (this.clearDepth) {\n            renderer.setRenderTarget(renderTarget);\n            renderer.clearDepth();\n        }\n        scene.overrideMaterial = this.overrideMaterial;\n        renderer.render(scene, this.camera, renderTarget);\n        scene.overrideMaterial = overrideMaterial;\n    }\n}\nexports.RenderPass = RenderPass;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst lib_1 = require(\"./lib\");\nconst Pass_1 = require(\"./Pass\");\n/**\n * A shader pass. Renders any shader material as a fullscreen effect.\n *\n * This pass should not be used to create multiple chained effects. For a more\n * efficient solution, please refer to the {@link EffectPass}.\n */\nclass ShaderPass extends Pass_1.Pass {\n    /**\n     * Constructs a new shader pass.\n     *\n     * @param material - A shader material.\n     * @param input - The name of the input buffer uniform.\n     */\n    constructor(material, input = 'inputBuffer') {\n        super(lib_1.PassName.Shader);\n        this.setFullscreenMaterial(material);\n        /**\n         * The input buffer uniform.\n         */\n        this.uniform = null;\n        this.setInput(input);\n    }\n    /**\n     * Sets the name of the input buffer uniform.\n     *\n     * Most fullscreen materials modify texels from an input texture. This pass\n     * automatically assigns the main input buffer to the uniform identified by\n     * the given name.\n     *\n     * @param input - The name of the input buffer uniform.\n     */\n    setInput(input) {\n        const materials = this.getFullscreenMaterials();\n        this.uniform = null;\n        materials.forEach(material => {\n            const uniforms = material.uniforms;\n            if (uniforms[input] !== undefined) {\n                this.uniform = uniforms[input];\n            }\n        });\n    }\n    /**\n     * Renders the effect.\n     *\n     * @param renderer - The renderer.\n     * @param inputBuffer - A frame buffer that contains the result of the previous pass.\n     * @param outputBuffer - A frame buffer that serves as the output render target unless this pass renders to screen.\n     */\n    render(renderer, inputBuffer, outputBuffer) {\n        if (this.uniform !== null) {\n            this.uniform.value = inputBuffer.texture;\n        }\n        renderer.render(this.scene, this.camera, this.renderToScreen ? undefined : outputBuffer);\n    }\n}\nexports.ShaderPass = ShaderPass;\n"],"sourceRoot":""}