!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("THREE")):"function"==typeof define&&define.amd?define(["THREE"],n):"object"==typeof exports?exports.postprocessing=n(require("THREE")):e.postprocessing=n(e.THREE)}(window,function(e){return function(e){var n={};function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)t.d(r,o,function(n){return e[n]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=22)}([function(n,t){n.exports=e},,function(e,n){e.exports="uniform sampler2D inputBuffer;\nuniform float opacity;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texel = texture2D(inputBuffer, vUv);\n\tgl_FragColor = opacity * texel;\n\n}\n"},function(e,n){e.exports="varying vec2 vUv;\n\nvoid main() {\n\n\tvUv = uv;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn min(x + y, 1.0) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, y.a), x.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (x + y) * 0.5 * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 0.0) ? y : max(1.0 - (1.0 - x) / y, 0.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x / (1.0 - y), 1.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn min(x, y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn abs(x - y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (x + y - 2.0 * x * y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn max(x, y) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn x * y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y > 0.0) ? min(x / y, 1.0) : 1.0;\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (1.0 - abs(1.0 - x - y)) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn y * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (x < 0.5) ? (2.0 * x * y) : (1.0 - 2.0 * (1.0 - x) * (1.0 - y));\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y == 1.0) ? y : min(x * x / (1.0 - y), 1.0);\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn (1.0 - (1.0 - x) * (1.0 - y)) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="float blend(const in float x, const in float y) {\n\n\treturn (y < 0.5) ?\n\t\t(2.0 * x * y + x * x * (1.0 - 2.0 * y)) :\n\t\t(sqrt(x) * (2.0 * y - 1.0) + 2.0 * x * (1.0 - y));\n\n}\n\nvec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\tvec3 z = vec3(blend(x.r, y.r), blend(x.g, y.g), blend(x.b, y.b));\n\n\treturn z * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n){e.exports="vec3 blend(const in vec3 x, const in vec3 y, const in float opacity) {\n\n\treturn max(x + y - 1.0, 0.0) * opacity + x * (1.0 - opacity);\n\n}\n\nvec4 blend(const in vec4 x, const in vec4 y, const in float opacity) {\n\n\treturn vec4(blend(x.rgb, y.rgb, opacity), y.a);\n\n}\n"},function(e,n,t){"use strict";t.r(n);var r,o=t(0);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.Clear="clear",e.Render="render",e.Shader="shader",e.Mask="mask",e.ClearMask="clearMask"}(r||(r={}));var u=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new o.Scene,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new o.OrthographicCamera(-1,1,1,-1,0,1);!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n,this.scene=t,this.camera=r,this.uniform=null,this.quad=null,this.needsSwap=!0,this.needsDepthTexture=!1,this.renderToScreen=!1,this.enabled=!0}var n,t,r;return n=e,(t=[{key:"getFullscreenMaterial",value:function(){return null!==this.quad?this.quad.material:null}},{key:"getFullscreenMaterials",value:function(){return null===this.quad?[]:Array.isArray(this.quad.material)?this.quad.material:[this.quad.material]}},{key:"setFullscreenMaterial",value:function(e){if(null!==this.quad)this.quad.material=e;else{var n=new o.Mesh(new o.PlaneBufferGeometry(2,2),e);n.frustumCulled=!1,null!==this.scene&&(this.scene.add(n),this.quad=n)}}},{key:"getDepthTexture",value:function(){return null}},{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"setSize",value:function(e,n){}},{key:"initialize",value:function(e,n){}},{key:"dispose",value:function(){var e=this;this.getFullscreenMaterials().forEach(function(e){return e.dispose()}),Object.keys(this).map(function(n){return e[n]}).filter(function(e){return null!==e&&"object"===i(e)&&"function"==typeof e.dispose}).forEach(function(e){return e.dispose()})}}])&&c(n.prototype,t),r&&c(n,r),e}();function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,n){return!n||"object"!==a(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,n){return(y=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var p=function(e){function n(e){var t,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(t=l(this,f(n).call(this,r.Shader))).setFullscreenMaterial(e),t.uniform=null,t.setInput(o),t}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&y(e,n)}(n,u),t=n,(o=[{key:"setInput",value:function(e){var n=this,t=this.getFullscreenMaterials();this.uniform=null,t.forEach(function(t){var r=t.uniforms;void 0!==r[e]&&(n.uniform=r[e])})}},{key:"render",value:function(e,n,t){null!==this.uniform&&(this.uniform.value=n.texture),e.render(this.scene,this.camera,this.renderToScreen?void 0:t)}}])&&s(t.prototype,o),i&&s(t,i),n}();function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function d(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,n){return!n||"object"!==b(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,n){return(g=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var m=function(e){function n(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),e=h(this,x(n).call(this,r.Clear));var o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){v(e,n,t[n])})}return e}({clearAlpha:0,clearColor:null},t);return e.needsSwap=!1,e.clearColor=o.clearColor,e.clearAlpha=o.clearAlpha,e}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&g(e,n)}(n,u),t=n,(o=[{key:"render",value:function(e,t){var r,o=this.clearColor;null!==o&&(n.color.copy(e.getClearColor()),r=e.getClearAlpha(),e.setClearColor(o,this.clearAlpha)),e.setRenderTarget(this.renderToScreen?void 0:t),e.clear(),null!==o&&e.setClearColor(n.color,r)}}])&&d(t.prototype,o),i&&d(t,i),n}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function E(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,n){return!n||"object"!==O(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,n){return(P=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}m.color=new o.Color;var j=function(e){function n(e,t){var o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(o=w(this,T(n).call(this,r.Render,e,t))).scene=e,o.camera=t,o.overrideMaterial=null;var c=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){S(e,n,t[n])})}return e}({overrideMaterial:null,clearAlpha:1,clearDepth:!1,clear:!0},i);return o.needsSwap=!1,o.clearPass=new m(c),o.overrideMaterial=c.overrideMaterial,o.clearDepth=c.clearDepth,o.clear=c.clear,o}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&P(e,n)}(n,u),t=n,(o=[{key:"render",value:function(e,n){var t=this.scene,r=this.renderToScreen?void 0:n,o=t.overrideMaterial;this.clear?(this.clearPass.renderToScreen=this.renderToScreen,this.clearPass.render(e,n)):this.clearDepth&&(e.setRenderTarget(r),e.clearDepth()),t.overrideMaterial=this.overrideMaterial,e.render(t,this.camera,r),t.overrideMaterial=o}}])&&E(t.prototype,o),i&&E(t,i),n}();function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,n){return!n||"object"!==C(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,n){return(D=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var B=function(e){function n(e,t){var o;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(o=R(this,k(n).call(this,r.Mask,e,t))).inverse=!1,o.clearStencil=!0,o.needsSwap=!1,o}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&D(e,n)}(n,u),t=n,(o=[{key:"render",value:function(e,n,t){var r=e.context,o=e.state,i=this.scene,c=this.camera,u=this.inverse?0:1,a=1-u;o.buffers.color.setMask(0),o.buffers.depth.setMask(0),o.buffers.color.setLocked(!0),o.buffers.depth.setLocked(!0),o.buffers.stencil.setTest(!0),o.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),o.buffers.stencil.setFunc(r.ALWAYS,u,4294967295),o.buffers.stencil.setClear(a),this.clearStencil&&(this.renderToScreen?(e.setRenderTarget(),e.clearStencil()):(e.setRenderTarget(n),e.clearStencil(),e.setRenderTarget(t),e.clearStencil())),this.renderToScreen?e.render(i,c):(e.render(i,c,n),e.render(i,c,t)),o.buffers.color.setLocked(!1),o.buffers.depth.setLocked(!1),o.buffers.stencil.setFunc(r.EQUAL,1,4294967295),o.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP)}}])&&_(t.prototype,o),i&&_(t,i),n}();function A(e){return(A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,n){return!n||"object"!==A(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function N(e){return(N=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e,n){return(F=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var I=function(e){function n(){var e;return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),(e=M(this,N(n).call(this,r.ClearMask))).needsSwap=!1,e}var t,o,i;return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&F(e,n)}(n,u),t=n,(o=[{key:"render",value:function(e){e.state.buffers.stencil.setTest(!1)}}])&&L(t.prototype,o),i&&L(t,i),n}(),z=t(2),U=t.n(z),G=t(3),H=t.n(G);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function q(e,n){return!n||"object"!==V(n)&&"function"!=typeof n?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):n}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,n){return(Y=Object.setPrototypeOf||function(e,n){return e.__proto__=n,e})(e,n)}var W=function(e){function n(){return function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),q(this,K(n).call(this,{uniforms:{inputBuffer:new o.Uniform(null),opacity:new o.Uniform(1)},fragmentShader:U.a,vertexShader:H.a,depthWrite:!1,depthTest:!1}))}return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(n&&n.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),n&&Y(e,n)}(n,o["ShaderMaterial"]),n}();function X(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Q(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var J,Z=function(){function e(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.renderer=n,this.inputBuffer=null,this.outputBuffer=null,this.copyPass=new p(new W),this.passes=[];var r=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){X(e,n,t[n])})}return e}({depthBuffer:!0,stencilBuffer:!1},t);null!==this.renderer&&(this.renderer.autoClear=!1,this.inputBuffer=this.createBuffer(r.depthBuffer,r.stencilBuffer),this.outputBuffer=this.inputBuffer.clone())}var n,t,r;return n=e,(t=[{key:"replaceRenderer",value:function(e){var n,t,r,o=this.renderer;return null!==o&&o!==e&&(this.renderer=e,this.renderer.autoClear=!1,n=o.domElement.parentNode,t=o.getSize(),r=e.getSize(),null!==n&&(n.removeChild(o.domElement),n.appendChild(e.domElement)),t.width===r.width&&t.height===r.height||this.setSize()),o}},{key:"getDepthTexture",value:function(e){var n,t,r=this.passes,o=null,i=!0;for(n=0;n<e;++n)(t=r[n]).needsSwap?i=!i:t instanceof j&&(o=(i?this.inputBuffer:this.outputBuffer).depthTexture);return o}},{key:"createDepthTexture",value:function(e,n){var t=new o.DepthTexture(e,n);this.inputBuffer.stencilBuffer&&(t.format=o.DepthStencilFormat,t.type=o.UnsignedInt248Type),this.inputBuffer.depthTexture=t,this.outputBuffer.depthTexture=t.clone()}},{key:"createBuffer",value:function(e,n){var t=this.renderer.getDrawingBufferSize(),r=this.renderer.context.getContextAttributes().alpha,i=new o.WebGLRenderTarget(t.width,t.height,{minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:r?o.RGBAFormat:o.RGBFormat,depthBuffer:e,stencilBuffer:n});return i.texture.name="EffectComposer.Buffer",i.texture.generateMipmaps=!1,i}},{key:"addPass",value:function(e,n){var t=this.renderer.getDrawingBufferSize();e.setSize(t.width,t.height),e.initialize(this.renderer,this.renderer.context.getContextAttributes().alpha),void 0!==n?this.passes.splice(n,0,e):n=this.passes.push(e)-1,e.needsDepthTexture&&(null===this.inputBuffer.depthTexture&&this.createDepthTexture(t.width,t.height),e.setDepthTexture(this.getDepthTexture(n)))}},{key:"removePass",value:function(e){this.passes.splice(this.passes.indexOf(e),1)}},{key:"render",value:function(e){var n,t,r,o=this.inputBuffer,i=this.outputBuffer,c=!1,u=!0,a=!1,s=void 0;try{for(var l,f=this.passes[Symbol.iterator]();!(u=(l=f.next()).done);u=!0){var y=l.value;y.enabled&&(y.render(this.renderer,o,i,e,c),y.needsSwap&&(c&&(this.copyPass.renderToScreen=y.renderToScreen,n=this.renderer.context,(t=this.renderer.state).buffers.stencil.setFunc(n.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,o,i),t.buffers.stencil.setFunc(n.EQUAL,1,4294967295)),r=o,o=i,i=r),y instanceof B?c=!0:y instanceof I&&(c=!1))}}catch(e){a=!0,s=e}finally{try{u||null==f.return||f.return()}finally{if(a)throw s}}}},{key:"setSize",value:function(e,n){var t;void 0!==e&&void 0!==n||(e=(t=this.renderer.getSize()).width,n=t.height),this.renderer.setSize(e,n);var r=this.renderer.getDrawingBufferSize();this.inputBuffer.setSize(r.width,r.height),this.outputBuffer.setSize(r.width,r.height);var o=!0,i=!1,c=void 0;try{for(var u,a=this.passes[Symbol.iterator]();!(o=(u=a.next()).done);o=!0){u.value.setSize(r.width,r.height)}}catch(e){i=!0,c=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw c}}}},{key:"reset",value:function(){var e=this.createBuffer(this.inputBuffer.depthBuffer,this.inputBuffer.stencilBuffer);this.dispose(),this.inputBuffer=e,this.outputBuffer=e.clone(),this.copyPass=new p(new W)}},{key:"dispose",value:function(){var e=!0,n=!1,t=void 0;try{for(var r,o=this.passes[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){r.value.dispose()}}catch(e){n=!0,t=e}finally{try{e||null==o.return||o.return()}finally{if(n)throw t}}this.passes=[],null!==this.inputBuffer&&(this.inputBuffer.dispose(),this.inputBuffer=null),null!==this.outputBuffer&&(this.outputBuffer.dispose(),this.outputBuffer=null),this.copyPass.dispose()}}])&&Q(n.prototype,t),r&&Q(n,r),e}();!function(e){e[e.SKIP=0]="SKIP",e[e.ADD=1]="ADD",e[e.ALPHA=2]="ALPHA",e[e.AVERAGE=3]="AVERAGE",e[e.COLOR_BURN=4]="COLOR_BURN",e[e.COLOR_DODGE=5]="COLOR_DODGE",e[e.DARKEN=6]="DARKEN",e[e.DIFFERENCE=7]="DIFFERENCE",e[e.EXCLUSION=8]="EXCLUSION",e[e.LIGHTEN=9]="LIGHTEN",e[e.MULTIPLY=10]="MULTIPLY",e[e.DIVIDE=11]="DIVIDE",e[e.NEGATION=12]="NEGATION",e[e.NORMAL=13]="NORMAL",e[e.OVERLAY=14]="OVERLAY",e[e.REFLECT=15]="REFLECT",e[e.SCREEN=16]="SCREEN",e[e.SOFT_LIGHT=17]="SOFT_LIGHT",e[e.SUBTRACT=18]="SUBTRACT"}(J||(J={}));var $=t(4),ee=t.n($),ne=t(5),te=t.n(ne),re=t(6),oe=t.n(re),ie=t(7),ce=t.n(ie),ue=t(8),ae=t.n(ue),se=t(9),le=t.n(se),fe=t(10),ye=t.n(fe),pe=t(11),be=t.n(pe),ve=t(12),de=t.n(ve),he=t(13),xe=t.n(he),ge=t(14),me=t.n(ge),Oe=t(15),Se=t.n(Oe),Ee=t(16),we=t.n(Ee),Te=t(17),Pe=t.n(Te),je=t(18),Ce=t.n(je),_e=t(19),Re=t.n(_e),ke=t(20),De=t.n(ke),Be=t(21),Ae=t.n(Be);function Le(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Me,Ne,Fe,Ie=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.blendFunction=n,this.opacity=new o.Uniform(t)}var n,t,r;return n=e,(t=[{key:"getShaderCode",value:function(){switch(this.blendFunction){case J.SKIP:return null;case J.ADD:return ee.a;case J.ALPHA:return te.a;case J.AVERAGE:return oe.a;case J.COLOR_BURN:return ce.a;case J.COLOR_DODGE:return ae.a;case J.DARKEN:return le.a;case J.DIFFERENCE:return ye.a;case J.EXCLUSION:return be.a;case J.LIGHTEN:return de.a;case J.MULTIPLY:return xe.a;case J.DIVIDE:return me.a;case J.NEGATION:return Se.a;case J.NORMAL:return we.a;case J.OVERLAY:return Pe.a;case J.REFLECT:return Ce.a;case J.SCREEN:return Re.a;case J.SOFT_LIGHT:return De.a;case J.SUBTRACT:return Ae.a}}}])&&Le(n.prototype,t),r&&Le(n,r),e}();function ze(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function Ue(e,n){for(var t=0;t<n.length;t++){var r=n[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}!function(e){e.Glitch="GlitchEffect"}(Me||(Me={})),function(e){e[e.NONE=0]="NONE",e[e.DEPTH=1]="DEPTH",e[e.CONVOLUTION=2]="CONVOLUTION"}(Ne||(Ne={})),function(e){e.DERIVATIVES="derivatives",e.FRAG_DEPTH="fragDepth",e.DRAW_BUFFERS="drawBuffers",e.SHADER_TEXTURE_LOD="shaderTextureLOD"}(Fe||(Fe={}));var Ge=function(){function e(n,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=n,this.fragmentShader=t,this.vertexShader=null;var o=function(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{},r=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.forEach(function(n){ze(e,n,t[n])})}return e}({attributes:Ne.NONE,blendFunction:J.SCREEN,defines:new Map,uniforms:new Map,extensions:new Set,vertexShader:null},r);this.attributes=o.attributes,this.vertexShader=o.vertexShader,this.defines=o.defines,this.uniforms=o.uniforms,this.extensions=o.extensions,this.blendMode=new Ie(o.blendFunction)}var n,t,r;return n=e,(t=[{key:"setDepthTexture",value:function(e){arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"update",value:function(e,n){arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},{key:"setSize",value:function(e,n){}},{key:"initialize",value:function(e,n){}},{key:"dispose",value:function(){for(var e=Object.keys(this),n=0;n<e.length;n++){var t=e[n];null!==this[t]&&"function"==typeof this[t].dispose&&(this[t].dispose(),this[t]=null)}}}])&&Ue(n.prototype,t),r&&Ue(n,r),e}();t.d(n,"EffectComposer",function(){return Z}),t.d(n,"Effect",function(){return Ge}),t.d(n,"BlendFunction",function(){return J}),t.d(n,"BlendMode",function(){return Ie}),t.d(n,"EffectName",function(){return Me}),t.d(n,"EffectAttribute",function(){return Ne}),t.d(n,"WebGLExtension",function(){return Fe}),t.d(n,"CopyMaterial",function(){return W}),t.d(n,"ClearMaskPass",function(){return I}),t.d(n,"ClearPass",function(){return m}),t.d(n,"MaskPass",function(){return B}),t.d(n,"Pass",function(){return u}),t.d(n,"RenderPass",function(){return j}),t.d(n,"ShaderPass",function(){return p})}])});
//# sourceMappingURL=postprocessing.js.map